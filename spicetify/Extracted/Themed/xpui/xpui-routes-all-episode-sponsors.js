"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[8059,8396],{87581:(e,r,t)=>{t.d(r,{Q:()=>p});var n=t(67154),o=t.n(n),s=t(67294),i=t(94184),a=t.n(i);const c="_pMNGOs2KBLWGpGmunYI";function p(e){return s.createElement("section",o()({},e,{className:a()(c,e.className)}))}},14784:(e,r,t)=>{t.r(r),t.d(r,{ALL_EPISODE_SPONSORS_TESTID:()=>O,AllEpisodeSponsors:()=>b,allEpisodeSponsorsPath:()=>f.e,default:()=>E});var n=t(67154),o=t.n(n),s=t(67294),i=t(52883),a=t(72125),c=t(28975),p=t(87581),u=t(77186);var d=t(88396),l=t(99922),f=t(61737);const O="all-episode-sponsors";function b({EpisodeSponsorsWrapper:e=d.EpisodeSponsorsWrapper}){const{[c.hd]:r}=(0,i.UO)(),t=(0,u.P)(),n=(0,l.o)();return t.location.state?s.createElement(p.Q,{"data-testid":O},s.createElement(e,o()({},n,{numberOfSponsorsToDisplay:1/0,reason:"Episode page See All"}))):s.createElement(a.A,{to:(0,c.lc)(r)})}const E=b},88396:(e,r,t)=>{t.r(r),t.d(r,{EPISODE_SPONSORS_SHELF_TESTID:()=>P,EpisodeSponsorsWrapper:()=>w,SEE_ALL_EPISODE_SPONSORS_TESTID:()=>h,default:()=>j});var n=t(67154),o=t.n(n),s=t(59713),i=t.n(s),a=t(67294),c=t(1486),p=t(8271);const u=(0,a.lazy)((()=>Promise.all([t.e(1814),t.e(7258)]).then(t.bind(t,87258))));function d({fetchedEpisodeSponsorsData:e,fireTrackingEvent:r,numberOfSponsorsToDisplay:t,firedViewedEvents:n,version:s,reason:i,uri:d}){const{displayedEpisodeSponsorsData:l}=function({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:r}){return(0,a.useMemo)((()=>({displayedEpisodeSponsorsData:e.slice(0,r)})),[e,r])}({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:t}),f=(0,p.s4)(),O=(0,a.useMemo)((()=>l.map(((e,t)=>a.createElement(u,o()({key:`${e.metadata.lineitem_id}-${t}`,fireTrackingEvent:r,firedViewedEvents:n,version:s,onClick:async function(){return f.send((0,c.$)({uri:d,reason:i,lineitem_id:l.map((e=>e.metadata.lineitemId)),ui_navigate:l.map((({clickthrough:e},r)=>t===r?e:"")),navigate_to_external_uri:l.map(((e,r)=>t===r))}))}},e))))),[l,r,n,s,i,d,f]);return{displayedEpisodeSponsorsData:l,displayedSponsors:O}}var l=t(69518),f=t.n(l);var O=t(52883);var b=t(18693);function E({firedViewedEvents:e}){var r;const t=(0,a.useRef)();return{firedViewedEvents:t.current=null!==(r=null!=e?e:t.current)&&void 0!==r?r:new Set}}function S(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?S(Object(t),!0).forEach((function(r){i()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function y({uri:e,getEpisodeSponsors:r,fireTrackingEvent:t,numberOfSponsorsToDisplay:n,version:o,reason:s}){const{state:i}=(0,O.TH)(),{episodeBase62Id:c}=function({uri:e,episodeBase62Id:r}){return{episodeBase62Id:(0,a.useMemo)((()=>{var t;return r||(null===(t=f().from(e))||void 0===t?void 0:t.getBase62Id())}),[e,r])}}(v(v({},i),{},{uri:e})),{fetchedEpisodeSponsorsData:p}=(0,b.m)(v(v({},i),{},{episodeBase62Id:c,getEpisodeSponsors:r,version:o})),{firedViewedEvents:u}=E(v({},i));return v(v({uri:e,episodeBase62Id:c,fetchedEpisodeSponsorsData:p},d({fetchedEpisodeSponsorsData:p,fireTrackingEvent:t,numberOfSponsorsToDisplay:n,firedViewedEvents:u,version:o,reason:s,uri:e})),{},{firedViewedEvents:u,reason:s})}function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function D(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach((function(r){i()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const g=(0,a.lazy)((()=>t.e(7479).then(t.bind(t,27479)))),P="episode-sponsors-shelf",h="see-all-episode-sponsors";function w(e){const{numberOfSponsorsToDisplay:r}=function({numberOfSponsorsToDisplay:e=3}){return{numberOfSponsorsToDisplay:e}}(e),t=y(D(D({},e),{},{numberOfSponsorsToDisplay:r}));return t.episodeBase62Id&&t.displayedSponsors.length?a.createElement(a.Suspense,{fallback:!0},a.createElement(g,o()({},e,{numberOfSponsorsToDisplay:r,state:t}))):null}const j=w},18693:(e,r,t)=>{t.d(r,{F:()=>i,m:()=>a});var n=t(67294),o=t(64005),s=t(31604);const i=420;function a({episodeBase62Id:e,getEpisodeSponsors:r,fetchedEpisodeSponsorsData:a=[],version:c}){const[p,u]=(0,n.useState)(a),d=(0,n.useCallback)((async()=>{try{if(!e)throw new Error("episodeBase62Id is required to fetch episode sponsors");const n=null!=r?r:(await Promise.resolve().then(t.bind(t,11401))).getEpisodeSponsors;u(await n(e,{version:c}))}catch(e){u([])}}),[e,r,c]),l=(0,o.y)(d,i);return(0,n.useEffect)((function(){a.length||l()}),[l,a.length]),(0,s.H)(l),{fetchedEpisodeSponsorsData:p}}},99922:(e,r,t)=>{t.d(r,{o:()=>s});var n=t(87577),o=t(49207);function s(){return{version:(0,n.W6)(o.GE)?2:1}}},31604:(e,r,t)=>{t.d(r,{H:()=>p});var n=t(67294),o=t(87577),s=t(49207),i=t(40080),a=t(8341),c=t(89952);function p(e){const r=(0,o.W6)(s.oF),t=(0,a.Y)((e=>{var r,t;const n=null!==(r=null==e?void 0:e.item)&&void 0!==r?r:void 0;return(0,c.k6)(n)&&n.isPodcastAd&&null!==(t=n.id)&&void 0!==t?t:void 0})),p=(0,i.D)(t);(0,n.useEffect)((function(){t!==p&&Boolean(t)&&setTimeout(e,r)}),[e,t,p,r])}},77186:(e,r,t)=>{t.d(r,{P:()=>p});var n=t(59713),o=t.n(n),s=t(67294),i=t(52883);function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){o()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function p(){const e=(0,i.k6)(),{listen:r,location:t}=e;return(0,s.useEffect)((function(){return r(((e,r)=>{"POP"===r&&(e.state=c(c(c({},void 0),t.state),e.state))}))})),e}},40080:(e,r,t)=>{t.d(r,{D:()=>o});var n=t(67294);function o(e){const r=(0,n.useRef)();return(0,n.useEffect)((()=>{r.current=e}),[e]),r.current}}}]);
//# sourceMappingURL=xpui-routes-all-episode-sponsors.js.map