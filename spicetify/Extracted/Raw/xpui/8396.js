"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[8396],{88396:(e,n,o)=>{o.r(n),o.d(n,{EPISODE_SPONSORS_SHELF_TESTID:()=>h,EpisodeSponsorsWrapper:()=>P,SEE_ALL_EPISODE_SPONSORS_TESTID:()=>w,default:()=>j});var r=o(67154),s=o.n(r),t=o(59713),i=o.n(t),a=o(67294),p=o(1486),c=o(8271);const d=(0,a.lazy)((()=>Promise.all([o.e(1814),o.e(7258)]).then(o.bind(o,87258))));function u({fetchedEpisodeSponsorsData:e,fireTrackingEvent:n,numberOfSponsorsToDisplay:o,firedViewedEvents:r,version:t,reason:i,uri:u}){const{displayedEpisodeSponsorsData:f}=function({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:n}){return(0,a.useMemo)((()=>({displayedEpisodeSponsorsData:e.slice(0,n)})),[e,n])}({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:o}),l=(0,c.s4)(),O=(0,a.useMemo)((()=>f.map(((e,o)=>a.createElement(d,s()({key:`${e.metadata.lineitem_id}-${o}`,fireTrackingEvent:n,firedViewedEvents:r,version:t,onClick:async function(){return l.send((0,p.$)({uri:u,reason:i,lineitem_id:f.map((e=>e.metadata.lineitemId)),ui_navigate:f.map((({clickthrough:e},n)=>o===n?e:"")),navigate_to_external_uri:f.map(((e,n)=>o===n))}))}},e))))),[f,n,r,t,i,u,l]);return{displayedEpisodeSponsorsData:f,displayedSponsors:O}}var f=o(69518),l=o.n(f);var O=o(52883);var b=o(18693);function S({firedViewedEvents:e}){var n;const o=(0,a.useRef)();return{firedViewedEvents:o.current=null!==(n=null!=e?e:o.current)&&void 0!==n?n:new Set}}function v(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,r)}return o}function y(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?v(Object(o),!0).forEach((function(n){i()(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):v(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function E({uri:e,getEpisodeSponsors:n,fireTrackingEvent:o,numberOfSponsorsToDisplay:r,version:s,reason:t}){const{state:i}=(0,O.TH)(),{episodeBase62Id:p}=function({uri:e,episodeBase62Id:n}){return{episodeBase62Id:(0,a.useMemo)((()=>{var o;return n||(null===(o=l().from(e))||void 0===o?void 0:o.getBase62Id())}),[e,n])}}(y(y({},i),{},{uri:e})),{fetchedEpisodeSponsorsData:c}=(0,b.m)(y(y({},i),{},{episodeBase62Id:p,getEpisodeSponsors:n,version:s})),{firedViewedEvents:d}=S(y({},i));return y(y({uri:e,episodeBase62Id:p,fetchedEpisodeSponsorsData:c},u({fetchedEpisodeSponsorsData:c,fireTrackingEvent:o,numberOfSponsorsToDisplay:r,firedViewedEvents:d,version:s,reason:t,uri:e})),{},{firedViewedEvents:d,reason:t})}function m(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,r)}return o}function D(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?m(Object(o),!0).forEach((function(n){i()(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}const g=(0,a.lazy)((()=>o.e(7479).then(o.bind(o,27479)))),h="episode-sponsors-shelf",w="see-all-episode-sponsors";function P(e){const{numberOfSponsorsToDisplay:n}=function({numberOfSponsorsToDisplay:e=3}){return{numberOfSponsorsToDisplay:e}}(e),o=E(D(D({},e),{},{numberOfSponsorsToDisplay:n}));return o.episodeBase62Id&&o.displayedSponsors.length?a.createElement(a.Suspense,{fallback:!0},a.createElement(g,s()({},e,{numberOfSponsorsToDisplay:n,state:o}))):null}const j=P},18693:(e,n,o)=>{o.d(n,{F:()=>i,m:()=>a});var r=o(67294),s=o(64005),t=o(31604);const i=420;function a({episodeBase62Id:e,getEpisodeSponsors:n,fetchedEpisodeSponsorsData:a=[],version:p}){const[c,d]=(0,r.useState)(a),u=(0,r.useCallback)((async()=>{try{if(!e)throw new Error("episodeBase62Id is required to fetch episode sponsors");const r=null!=n?n:(await Promise.resolve().then(o.bind(o,11401))).getEpisodeSponsors;d(await r(e,{version:p}))}catch(e){d([])}}),[e,n,p]),f=(0,s.y)(u,i);return(0,r.useEffect)((function(){a.length||f()}),[f,a.length]),(0,t.H)(f),{fetchedEpisodeSponsorsData:c}}},31604:(e,n,o)=>{o.d(n,{H:()=>c});var r=o(67294),s=o(87577),t=o(49207),i=o(40080),a=o(8341),p=o(89952);function c(e){const n=(0,s.W6)(t.oF),o=(0,a.Y)((e=>{var n,o;const r=null!==(n=null==e?void 0:e.item)&&void 0!==n?n:void 0;return(0,p.k6)(r)&&r.isPodcastAd&&null!==(o=r.id)&&void 0!==o?o:void 0})),c=(0,i.D)(o);(0,r.useEffect)((function(){o!==c&&Boolean(o)&&setTimeout(e,n)}),[e,o,c,n])}}}]);
//# sourceMappingURL=8396.js.map