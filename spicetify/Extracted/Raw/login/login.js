(()=>{var e,t={9583:(e,t,n)=>{"use strict";var a={};n.r(a),n.d(a,{ENTER_LOGIN_MODE:()=>_,ENTER_SETTINGS_MODE:()=>y,ENTER_SIGNUP_MODE:()=>E,ENTER_SIGNUP_MODE_STEP_0:()=>f,ENTER_SIGNUP_MODE_STEP_1:()=>S,ENTER_WELCOME_MODE:()=>b,INTERACTION:()=>k,START_APP:()=>h,enterLoginMode:()=>D,enterSettingsMode:()=>I,enterSignupMode:()=>T,enterSignupModeStep0:()=>A,enterSignupModeStep1:()=>N,enterWelcomeMode:()=>v,interaction:()=>C,openSignupPage:()=>P,startApp:()=>O});var i={};n.r(i),n.d(i,{ABORT_LOGIN_TYPE_ACCOUNTS:()=>le,ACCOUNTS_METHODS:()=>de,LOADING:()=>te,LOGIN_BEFORE:()=>q,LOGIN_CLEAR_ERRORS:()=>Z,LOGIN_FAIL:()=>ee,LOGIN_SUCCESS:()=>Q,LOGIN_TYPE_ACCOUNTS:()=>se,LOGIN_TYPE_AUTOLOGIN:()=>oe,LOGIN_TYPE_EMAIL:()=>ae,LOGIN_TYPE_FACEBOOK:()=>ie,LOGIN_TYPE_FACEBOOK_POPUP:()=>re,UTM_PARAMETERS:()=>ne,abortLoginWithAccounts:()=>fe,fetchUTMParameters:()=>_e,loading:()=>me,login:()=>he,loginClearErrors:()=>ye,loginFailed:()=>pe,loginSuccess:()=>ue,loginWithAccounts:()=>Ee,loginWithFacebookPopup:()=>Se,receivedUTMParameters:()=>be});var r={};n.r(r),n.d(r,{CLEAR_ALL_ERRORS:()=>Ke,COUNTRY_NOT_LAUNCHED:()=>Je,FACEBOOK_SIGNUP_ATTEMPT:()=>Be,FACEBOOK_SIGNUP_FAILURE:()=>je,FACEBOOK_SIGNUP_SUCCESS:()=>Ge,SIGNUP_ATTEMPT:()=>Me,SIGNUP_FAILURE:()=>Ue,SIGNUP_RESTRICTIONS_FAILURE:()=>Re,SIGNUP_RESTRICTIONS_SUCCESS:()=>Fe,SIGNUP_SUCCESS:()=>xe,UPDATE_SIGNUP_DATA:()=>Ye,VALIDATE_FIELD_ATTEMPT:()=>We,VALIDATE_FIELD_FAILURE:()=>Ve,VALIDATE_FIELD_SUCCESS:()=>He,clearAllErrors:()=>ut,countryNotLaunched:()=>ct,facebookSignup:()=>at,facebookSignupFailure:()=>rt,facebookSignupSuccess:()=>it,getSignupRestrictions:()=>$e,signup:()=>qe,signupAttempt:()=>Ze,signupFailure:()=>tt,signupRestrictionsFailure:()=>ze,signupRestrictionsSuccess:()=>Xe,signupSuccess:()=>et,signupWithAccounts:()=>nt,updateSignupData:()=>dt,validateField:()=>Qe,validateFieldAttempt:()=>ot,validateFieldFailure:()=>st,validateFieldSuccess:()=>lt});var o={};n.r(o),n.d(o,{SETTINGS_FETCH_PROXY_SETTINGS_FAILURE:()=>Dt,SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS:()=>Nt,SETTINGS_RESTART_CLIENT_FAILURE:()=>Ct,SETTINGS_RESTART_CLIENT_SUCCESS:()=>Pt,SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE:()=>It,SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS:()=>vt,fetchProxySettings:()=>wt,restartClient:()=>Ft,updateProxySettings:()=>Lt});var s=n(7294),l=n(3935),d=n(7209),c=n(6458),u=n(2976),p=n(685),m=n(9713),g=n.n(m);const h="START_APP",E="ENTER_SIGNUP_MODE",f="ENTER_SIGNUP_MODE_STEP_0",S="ENTER_SIGNUP_MODE_STEP_1",_="ENTER_LOGIN_MODE",b="ENTER_WELCOME_MODE",y="ENTER_SETTINGS_MODE",k="INTERACTION";function O(){return{type:h}}function T(e=null){return{type:E,actionHash:e}}function A(){return{type:f}}function N(){return{type:S}}function D(e=null){return{type:_,actionHash:e}}function v(e=null){return{type:b,errorMessage:e}}function I(){return{type:y}}function P(e=!1){return(t,n)=>{const a=n();let i,r={};switch(e?"website":"desktop-app"){case"desktop-app":t(T());break;case"website":{r=a.login.utmParameters||{utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""};const e=Object.keys(r).reduce(((e,t)=>(e[t]=encodeURIComponent(r[t]),e)),{});i=`https://www.spotify.com/signup?utm_source=${e.utm_source}&utm_medium=${e.utm_medium}&utm_campaign=${e.utm_campaign}`,e.referral&&(i+=`&referral=${e.referral}&referrer=${e.referral}`),window.open(i);break}}}}function C(e,t,n,a,i){return{type:k,page:e,interactionType:t,intent:n,itemId:a,actionHash:i}}const w=e=>n.g&&"function"==typeof n.g._getSpotifyModule?new Promise(((t,a)=>{n.g._getSpotifyModule("bridge").executeRequest(JSON.stringify(e),{onSuccess:t,onFailure:a})})):null,L="https://www.spotify.com/redirect/account-page/",F="showSettings",R={id:"UnknownLoginErrorMessage"},M={id:"DefaultErrorMessage",replace:[F]},U={id:"FbFailureOpenPopup",silent:!0},x={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[F]},400:R,401:R,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:R,405:R,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[L]},408:{id:"RegionMismatchMessage",replace:[L,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:R,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:R,415:R,416:R,417:{id:"FacebookCredentialsMisusedMessage"},418:R,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]},1001:{silent:!0},1002:U,1003:{id:"FbUserNotFoundSignUp",replace:["showSignup"]},1004:U,1005:U,1006:U},B={1:R,2:R,3:{id:"BadCredentialsMessage"},4:R,5:R,6:R,7:R,8:R,9:R},G={1:{silent:!0},2:R,3:R,4:{id:"SessionExpiredMessage"},5:M},j=window.localStorage;function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const H="lastUsername",Y="THIS_USER_DOES_NOT_EXIST_AND_IS_A_PLACEHOLDER",J="utmParameters",K=j.getItem(J),$=j.getItem(H),X={errorData:null,loginInProgress:!1,redirectTo:null,username:$!==Y?$:"",utmParameters:K?JSON.parse(K):null};const z=function(e=X,t){switch(t.type){case Ut.LOADING:return V(V({},e),{},{loading:!0,throbberDelay:t.throbberDelay});case Ut.LOGIN_FAIL:return V(V({},e),{},{loading:!1,errorData:t.errorData,loggedIn:!1,loginInProgress:!1});case Ut.LOGIN_BEFORE:return V(V({},e),{},{errorData:t.errorData,loggedIn:!1,loginInProgress:t.loginInProgress,username:t.username});case Ut.LOGIN_SUCCESS:return V(V({},e),{},{loading:!1,loggedIn:!0,redirectDelay:t.redirectDelay||0,redirectTo:t.redirectTo,username:t.username});case Ut.UTM_PARAMETERS:return V(V({},e),{},{utmParameters:t.utmParameters});case Ut.LOGIN_CLEAR_ERRORS:return V(V({},e),{},{errorData:null});default:return e}},q="LOGIN_BEFORE",Q="LOGIN_SUCCESS",Z="LOGIN_CLEAR_ERRORS",ee="LOGIN_FAIL",te="LOADING",ne="UTM_PARAMETERS",ae="login",ie="login-facebook",re="login-facebook-popup",oe="autologin",se="login-accounts",le="abort-login-accounts",de={facebook:"facebook",apple:"apple",google:"google"};function ce(e,t=ae){return{type:q,errorData:null,username:e||"",loginInProgress:t===ae,loginType:t}}function ue(e,t,n=ae,a=!1,i){return{type:Q,errorData:null,redirectTo:i,redirectDelay:t||0,username:e,loginType:n,afterSignup:a}}function pe(e,t=ae){return{type:ee,errorData:e,loginType:t}}function me(e){return{type:te,throbberDelay:e&&e.throbberDelay?e.throbberDelay:0}}const ge=async(e,t,{defaultErrorCode:n,redirectDelay:a=0}={},i=ae,r=!1,o=null,s=!0)=>{o&&(t.args=t.args||[],t.args[0]=t.args[0]||{},t.args[0].actionHash=o);try{const n=JSON.parse(await w(t)).redirectTo||"xpui";let o=null;t&&t.args&&t.args[0]&&(o=t.args[0].username),e(ue(s?o:Y,a,i,r,n))}catch(t){let a=t;n?a={errorCode:n}:"string"==typeof t&&(a=JSON.parse(t)),a.errorCode&&x[a.errorCode]&&"FbFailureOpenPopup"===x[a.errorCode].id?e(Se(o)):e(pe(a,i))}};function he({username:e,password:t,rememberMe:n},a=!1,i=null){return r=>{const o=a?oe:ae;r(ce(n?e:Y,o));ge(r,{name:ae,args:[{username:e,password:t,rememberMe:n}]},{redirectDelay:200},o,a,i,n)}}function Ee(e,t){return n=>{n(ce(null,se));ge(n,{name:se,args:[{method:e,enableSignup:!1}]},{redirectDelay:200},se,!1,t)}}function fe(){return async()=>{await w({name:le,args:[]})}}function Se(e=null){return t=>{t(ce(null,ie));ge(t,{name:re,args:[]},{redirectDelay:200},ie,!1,e)}}function _e(){return async e=>{e(be(JSON.parse(await w({name:"get-signup-utm-parameters",args:[]}))))}}function be(e){return{type:ne,utmParameters:e}}function ye(){return{type:Z}}var ke=n(6479),Oe=n.n(ke),Te=n(8495),Ae=n.n(Te);const Ne=["errors"];function De(){const e="undefined"!=typeof window&&window.__spotify&&window.__spotify.DESKTOP_SIGNUP_DEBUG_KEY;return e||"4c7a36d5260abca4af282779720cf631"}function ve(){const e="undefined"!=typeof window&&window.__spotify&&window.__spotify.client_version||"";if(!e)throw new Error("Missing Spotify App Version! Something is wrong: talk to #desktop-squad.");return["Spotify-App-Version",e]}function Ie(){const e="undefined"!=typeof window&&window.navigator&&window.navigator.platform||"";let t="";if(-1!==e.indexOf("Mac")?t="OSX":-1!==e.indexOf("Win")?t="Win32":-1!==e.indexOf("Linux")&&(t="Linux"),!t)throw new Error("Missing App Platform! Something is wrong: talk to #desktop-squad.");return["App-Platform",t]}function Pe(e){const t=new Map(Object.entries(e).sort()),n=function(e){const t=Ae().create();return e.forEach((e=>{void 0!==e&&t.update(e.toString())})),t.hex()}(t);if(t.size>n.length)return t;const a=[...t],i=[...Array(t.size).keys()].sort((function(e,t){const i=n.charAt(e).localeCompare(n.charAt(t));return 0!==i?i:a[e][0].localeCompare(a[t][0])})),r=new Map;return i.forEach((function(e){r.set(a[e][0],a[e][1])})),r}const Ce=e=>async(t,n,a)=>{const i=function({name:e,email:t,password:n,gender:a,birthDate:i={},sendEmail:r,shareData:o,agreeEula:s}={},l={utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""},d=!1){const c=Object.keys(l).reduce(((e,t)=>(e[t]=encodeURIComponent(l[t]),e)),{});let u=`https://login.app.spotify.com?utm_source=${c.utm_source}&utm_medium=${c.utm_medium}&utm_campaign=${c.utm_campaign}`;c.referral&&(u+=`&referral=${c.referral}&referrer=${c.referral}`);const p={key:De(),displayname:e,email:t,password:n,password_repeat:n,gender:a,birth_year:i.year,birth_month:i.month,birth_day:i.day,iagree:s?1:0,creation_point:u,creation_flow:"desktop",platform:"desktop",referrer:c.referral};return"boolean"==typeof r&&(p["send-email"]=r),"boolean"==typeof o&&(p.thirdpartyemail=o),d&&Object.keys(p).forEach((e=>{void 0===p[e]&&delete p[e]})),Pe(p)}(t,n,a),r=new FormData;i.forEach(((e,t)=>{r.append(t,e)}));const o=[ve(),Ie()].reduce(((e,t)=>(e[t[0]]=t[1],e)),{}),s={method:"POST",body:r,headers:{"App-Platform":o["App-Platform"],"Spotify-App-Version":o["Spotify-App-Version"],"X-Client-Id":{NODE_ENV:"production",DEBUG_EVENT_SENDER:!1,DEBUG_SEMANTIC_METRICS:void 0,PRODUCT_NAME:"desktop"}.SPOTIFY_CLIENT_ID}},l=new Request(e,s);((e,t)=>{const n=e.headers.get("content-type");e.headers.set("content-type",((e,t)=>[...e.split(";"),t].join(";"))(n,t))})(l,"charset=utf-8");const d=await fetch(l),c=await d.json()||{},{errors:u}=c,p=Oe()(c,Ne);if(u)throw u;return p},we=Ce("https://spclient.wg.spotify.com/signup/public/v1/account/"),Le=Ce("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=true");const Fe="SIGNUP_RESTRICTIONS_SUCCESS",Re="SIGNUP_RESTRICTIONS_FAILURE",Me="SIGNUP_ATTEMPT",Ue="SIGNUP_FAILURE",xe="SIGNUP_SUCCESS",Be="FACEBOOK_SIGNUP_ATTEMPT",Ge="FACEBOOK_SIGNUP_SUCCESS",je="FACEBOOK_SIGNUP_FAILURE",We="VALIDATE_FIELD_ATTEMPT",Ve="VALIDATE_FIELD_FAILURE",He="VALIDATE_FIELD_SUCCESS",Ye="UPDATE_SIGNUP_DATA",Je="COUNTRY_NOT_LAUNCHED",Ke="CLEAR_ALL_ERRORS";function $e(){return async(e,t)=>{const n=t();try{e(Xe(window.__spotify&&!0===window.__spotify.is_running_on_teamcity?{}:await(async()=>{const e=await fetch("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=1"),t=await e.json()||{};if(t.errors&&t.errors.length>0)throw t.errors;return t})()))}catch(t){e(ze(t)),n.app&&n.app.mode&&"welcome"!==n.app.mode&&(e(D()),e(P(!0)))}}}function Xe(e){return{type:Fe,restrictions:e}}function ze(e){return{type:Re,error:e}}function qe(e=null){return async(t,n)=>{t(Ze());const a=n().signup.formData,i=n().login.utmParameters;try{await we(a,i),t(et());const{email:n,password:r}=a;t(he({username:n,password:r,rememberMe:!0},!0,e))}catch(e){const n={};Object.keys(e).forEach((t=>{n["birthdate"===t?"birthDate":t]={message:e[t]}})),t(tt(n))}}}function Qe(e){return async(t,n)=>{const a=n().signup.formData[e],i=n().login.utmParameters;t(ot(e,a));try{await Le({[e]:a},i,!0)}catch(n){n[e]&&t(st(e,{message:n[e]}))}}}function Ze(){return{type:Me}}function et(){return{type:xe}}function tt(e){return{type:Ue,errors:e}}function nt(e,t=null){return n=>{const a={name:se,args:[{method:e,enableSignup:!0}]};n(at()),(async(e,t,n=null)=>{n&&(t.args=t.args||[],t.args[0]=t.args[0]||{},t.args[0].actionHash=n);try{const n=JSON.parse(await w(t)).redirectTo||"xpui";e(it()),e(ue(null,0,oe,!0,n))}catch(t){let n=t;"string"==typeof t&&(n=JSON.parse(t)),e(rt(n))}})(n,a,t)}}function at(){return{type:Be}}function it(){return{type:Ge}}function rt(e){return{type:je,errorData:e}}function ot(e,t){return{type:We,field:e,value:t}}function st(e,t){return{type:Ve,field:e,error:t}}function lt(e){return{type:He,field:e}}function dt(e){return{type:Ye,data:e}}function ct(){return{type:Je}}function ut(){return{type:Ke}}let pt,mt,gt;!function(e){e.af="af",e.am="am",e.ar="ar",e.az="az",e.bg="bz",e.bn="bn",e.bho="bho",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.es419="es-419",e.es="es",e.et="et",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="bn",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pa-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th_TH",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhTW="zh-TW",e.zu="zu"}(pt||(pt={})),function(e){e.AR="، ",e.FA="، ",e.EN=", "}(mt||(mt={})),function(e){e.ZERO="zero",e.ONE="one",e.TWO="two",e.FEW="few",e.MANY="many",e.OTHER="other"}(gt||(gt={}));let ht={};function Et(e){return"number"==typeof e?e.toString():e.replace(/\$/,"$$$$")}const ft=e=>"ar"===e?"ar-u-nu-latn":e;class St{constructor(){g()(this,"_locale",void 0),g()(this,"_dictionary",void 0),this._dictionary={},this._locale=pt.en}setDictionary(e){this._dictionary=e}setLocale(e){this._locale=e}getLocale(){return this._locale}toLocaleLowerCase(e){return null==e?void 0:e.toLocaleLowerCase(this._locale)}toLocaleUpperCase(e){return null==e?void 0:e.toLocaleUpperCase(this._locale)}get(e,...t){const n=e in this._dictionary?this._dictionary[e]:e;let a="";if("string"!=typeof n){const e=t[0],i=((e,t)=>{try{return(ht[e]||(ht[e]=new Intl.PluralRules(e))).select(t)}catch{return gt.OTHER}})(this._locale,parseInt(e,10)),r=n[i];void 0!==r?a=r:n.other&&(a=n.other)}else a=n;if(/%\d%/.test(a)){if(!["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop.login.errorCode","desktop-auth.error"].includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}if((null==t?void 0:t.length)>0)for(let e=0;e<t.length;e++){const n=t[e];if(null!=n)if("string"==typeof n)a=a.replace(`{${e}}`,Et(n)).replace(`%${e}%`,Et(n));else if("number"==typeof n){const t=this.formatNumber(n);a=a.replace(`{${e}}`,t).replace(`%${e}%`,t)}else if("object"==typeof n)for(const e of Object.keys(n)){const t=n[e];a=a.replace(`%${e}%`,Et(t))}}return a}getSeparator(){switch(this._locale){case pt.ar:return mt.AR;case pt.fa:return mt.FA;default:return mt.EN}}formatNumber(e,t){return e.toLocaleString(ft(this._locale),t)}formatNumberCompact(e,t){const n={notation:"compact",maximumFractionDigits:1};if(t){const a=new St;return a.setLocale(t),a.formatNumber(e,n)}return this.formatNumber(e,n)}formatDate(e,t=null){const n=t||{year:"numeric",month:"long",day:"numeric"};return new Intl.DateTimeFormat(ft(this._locale),n).format(e)}formatRelativeDate(e,t=null){var n;const a=new Date(Date.now()),i=(e=new Date(e)).getTime()-a.getTime();if(Math.abs(i)<2592e6&&null!==(n=Intl)&&void 0!==n&&n.RelativeTimeFormat){const{days:e,hours:t,minutes:n,seconds:a}=(r=i,{seconds:Math.round(r/1e3),minutes:Math.round(r/1e3/60),hours:Math.round(r/1e3/60/60),days:Math.round(r/1e3/60/60/24)}),o=new Intl.RelativeTimeFormat;return e||t||n?e||t?e?o.format(e,"days"):o.format(t,"hours"):o.format(n,"minutes"):o.format(a,"seconds")}var r;return this.formatDate(e,t)}__resetForTests(){this._dictionary={},this._locale=pt.en,ht={}}}const _t=new St,bt=2,yt=3,kt=4,Ot={"auto-detect":{label:()=>_t.get("desktop.settings.proxy.autodetect")},"no-proxy":{label:()=>_t.get("desktop.settings.proxy.noproxy")},http:{label:()=>_t.get("desktop.settings.proxy.http")},socks4:{label:()=>_t.get("desktop.settings.proxy.socks4")},socks5:{label:()=>_t.get("desktop.settings.proxy.socks5")}},Tt=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}],At="sp://proxy/v1/";const Nt="SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS",Dt="SETTINGS_FETCH_PROXY_SETTINGS_FAILURE",vt="SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS",It="SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE",Pt="SETTINGS_RESTART_CLIENT_SUCCESS",Ct="SETTINGS_RESTART_CLIENT_FAILURE";function wt(){return e=>{(async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"GET",uri:At}),persistent:!1,onSuccess:n=>{const a=JSON.parse(n);200!==a.status&&t(new Error(`Failed to fetch proxy settings (status code: ${a.status})`));const i=JSON.parse(a.body);e({mode:i["network.proxy.mode"],address:i["network.proxy.addr"],username:i["network.proxy.user"],password:i["network.proxy.pass"]})},onFailure:(e,n)=>{t(e)}})}))})().then((t=>{e(function(e){return{type:Nt,data:e}}(t))}),(t=>{e(function(e){return{type:Dt,error:e}}(t))}))}}function Lt(e){return t=>{(async function(e){return new Promise(((t,n)=>{const a={"network.proxy.mode":e.mode};[bt,yt,kt].includes(e.mode)&&(a["network.proxy.addr"]=e.address,a["network.proxy.user"]=e.username),[bt,kt].includes(e.mode)&&(a["network.proxy.pass"]=e.password),window.sendCosmosRequest({request:JSON.stringify({method:"PUT",uri:At,body:JSON.stringify(a)}),persistent:!1,onSuccess:()=>{t()},onFailure:(e,t)=>{n(e)}})}))})(e).then((()=>{t({type:vt}),t(wt())}),(e=>{t(function(e){return{type:It,error:e}}(e))}))}}function Ft(){return e=>{(async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://desktop/v1/restart"}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,n)=>{t(e)}})}))})().then((()=>{e({type:Pt})}),(t=>{e(function(e){return{type:Ct,error:e}}(t))}))}}function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ut=Mt(Mt(Mt(Mt({},a),i),r),o);class xt extends s.Component{constructor(e){super(e),this.state={hidden:this.props.delay>0}}componentDidMount(){!0===this.state.hidden&&(this.throbberTimeout=setTimeout((()=>{this.setState({hidden:!1})}),this.props.delay))}componentWillUnmount(){this.throbberTimeout&&clearTimeout(this.throbberTimeout)}render(){return this.state.hidden?null:s.createElement("div",{"data-testid":"glue-throbber",className:"GlueThrobber "+(this.props.initial?"throbber-initial":"throbber")},s.createElement("div",null))}}xt.defaultProps={delay:0,initial:!0};var Bt=n(2808),Gt=n.n(Bt);function jt(){return Gt().create().toString()}var Wt=n(6668),Vt=n(9450);class Ht extends s.PureComponent{constructor(e){super(e),this.handleLoginClick=this.handleLoginClick.bind(this),this.handleErrorClick=this.handleErrorClick.bind(this)}handleLoginClick(){const e=jt();this.props.openLoginPage(e),this.props.onInteraction("login/welcome","click","open-page-login",null,e)}handleErrorClick(e){if(e.target.getAttribute("data-action")){"showSettings"===e.target.getAttribute("data-action")&&this.props.openSettingsPage()}}render(){const{errorMessage:e}=this.props;return s.createElement("main",{className:"Welcome","data-testid":"welcome"},s.createElement("h1",{className:"HeroText __welcome"},_t.get("desktop-auth.login.millions-of-songs"),s.createElement("br",null),_t.get("desktop-auth.login.free-on-spotify")),s.createElement("div",{className:"Welcome__signup-or-login"},e&&s.createElement("div",{className:"Welcome__error-message",role:"alert",onClick:this.handleErrorClick,"aria-live":"assertive"},s.createElement(Wt.l,{className:"Welcome__error-message__icon"}),s.createElement("span",{dangerouslySetInnerHTML:{__html:e}})),s.createElement(Vt.D,{id:"login-button",onClick:this.handleLoginClick,"data-ta-id":"welcome-login-button","data-testid":"login-button",fullWidth:!0},_t.get("desktop.login.LoginButton"))))}}const Yt=(0,c.$j)((e=>({errorMessage:e.app.errorMessage})),(e=>({openLoginPage:t=>e(Ut.enterLoginMode(t)),openSettingsPage:()=>e(Ut.enterSettingsMode()),onInteraction:(t,n,a,i,r)=>e(Ut.interaction(t,n,a,i,r))})))(Ht);var Jt=n(7873),Kt=n(4657),$t=n(1770),Xt=n(4184),zt=n.n(Xt);function qt(e,t,n){if(0===t)return!1;if(!e&&!t)return!1;let a=x;switch(e){case"session":a=B;break;case"desktop_login_accounts":a=G}const i=a[t]||M;if(i.silent)return!1;const r=i.replace||[];let o="";switch(i.id){case"UnknownLoginErrorMessage":o=_t.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":o=_t.get("desktop.login.DefaultErrorMessage",r[0]);break;case"SessionTerminatedMessage":o=_t.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":o=_t.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":o=_t.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":o=_t.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":o=_t.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":o=_t.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":o=_t.get("desktop.login.ErrorProxyAuthRequired",r[0]);break;case"CriticalUpdate":o=_t.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":o=_t.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":o=_t.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":o=_t.get("desktop.login.MissingUserInfoMessage",r[0]);break;case"RegionMismatchMessage":o=_t.get("desktop.login.RegionMismatchMessage",r[0],r[1]);break;case"PremiumUsersOnlyMessage":o=_t.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":o=_t.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":o=_t.get("desktop.login.ClientUpdateFail",r[0]);break;case"FbUserNotFoundSignUp":o=_t.get("desktop.login.FbUserNotFoundSignUp",r[0])}return`${o}<br>${_t.get("desktop.login.errorCode",n)}`}function Qt({validity:e={}}){return e.valid?null:["valueMissing","typeMismatch","tooShort"].find((t=>e[t]))}const Zt=()=>s.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8ZM7.25 3V10H8.75V3H7.25ZM7.25 11.5256V13.0256H8.75V11.5256H7.25Z",fill:"#eb6471"}));class en extends s.PureComponent{render(){const{errorMessage:e}=this.props;return s.createElement("div",{"aria-live":"polite",className:zt()("FieldError",{"FieldError--hidden":!e})},s.createElement(Zt,null),s.createElement("span",null,e||""))}}let tn=0;class nn extends s.PureComponent{constructor(...e){super(...e),this.idNumber=++tn,this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.onChange(e)}render(){const{label:e,placeholderLabel:t,name:n,type:a,isRequired:i,taId:r,id:o,defaultValue:l,value:d,minLength:c,autoFocus:u,hasError:p,isDisabled:m,isHiddenForScreenReaders:g,useCustomStyle:h,className:E,inputClassName:f,inputRef:S,onBlur:_,onFocus:b,onInput:y,onKeyDown:k,onKeyUp:O}=this.props,T=o||`GlueTextInput-${this.idNumber}`;return s.createElement("label",{className:h?E:"GlueTextInput",htmlFor:T,"aria-label":e,"aria-hidden":!!g||void 0},s.createElement("input",{className:h?f:zt()("GlueTextInput__input",{"GlueTextInput__input--has-error":p}),tabIndex:g?"-1":void 0,type:a,id:T,name:n,"data-ta-id":r,"aria-invalid":p,disabled:m,minLength:c,autoFocus:u,placeholder:t||e,value:l?void 0:d,defaultValue:l,onBlur:_,onFocus:b,onChange:this.handleChange,onInput:l?void 0:y,onKeyDown:k,onKeyUp:O,ref:S,required:i}))}}nn.defaultProps={name:"",type:"text",isRequired:!1,taId:"",defaultValue:void 0,value:"",minLength:0,autoFocus:!1,hasError:!1,isDisabled:!1,isHiddenForScreenReaders:!1,useCustomStyle:!1,onBlur(){},onFocus(){},onChange(){},onInput(){},onKeyDown(){}};class an extends s.PureComponent{constructor(e){super(e),g()(this,"handleTogglePasswordVisible",(()=>{const e=!this.state.passwordVisible;this.setState({passwordVisible:e}),this.props.onTogglePasswordVisibility&&this.props.onTogglePasswordVisibility(e)})),this.state={isEditing:!1,passwordVisible:!1},this.handleBlur=this.handleBlur.bind(this),this.handleInput=this.handleInput.bind(this)}handleBlur({target:e,relatedTarget:t}){this.setState({isEditing:!1}),t&&(t.name||"submit"===t.type)&&this.validate(e)}handleInput(){this.setState({isEditing:!0})}validate(e){const{name:t,onValidate:n,noValidate:a}=this.props;!a&&n&&n(t,Qt(e))}renderPasswordEyeToggler(){const{type:e}=this.props,{passwordVisible:t}=this.state;return"password"!==e?null:s.createElement(s.Fragment,null,s.createElement("button",{type:"button",onClick:this.handleTogglePasswordVisible,tabIndex:"-1",className:"FormField--passwordEyeIcon "+(t?"passwordVisible":"")}),s.createElement("span",{tabIndex:"-1",className:"FormField--passwordEyeIcon--cross "+(t?"passwordVisible":"")}))}render(){const{error:e={},noValidate:t,label:n,name:a,type:i,value:r,isRequired:o,minLength:l,autoFocus:d,isDisabled:c,onChange:u,onKeyUp:p,onFocus:m,rightIcon:g=null}=this.props,{isEditing:h,passwordVisible:E}=this.state,f=g;let S=i;return"password"===i&&E&&(S="text"),s.createElement("div",{className:zt()("FormField",{"FormField--no-validate":t})},s.createElement(nn,{label:n,name:a,type:S,taId:`${a}-field`,value:r,isRequired:o,minLength:l,autoFocus:d,hasError:!!e.message&&!h,isDisabled:c,onChange:u,onFocus:m,onKeyUp:p,onBlur:this.handleBlur,onInput:this.handleInput}),f&&s.createElement(f,{className:"FormField--rightIcon"}),this.renderPasswordEyeToggler(),!t&&!h&&e.message&&s.createElement(s.Fragment,null,s.createElement(en,{errorMessage:e.message})))}}const rn=(0,c.$j)((()=>({})),(()=>({})))(an);var on=n(7154),sn=n.n(on);const ln=["type","name","label","classes","hasError"];class dn extends s.PureComponent{constructor(...e){super(...e),this.handleBlur=this.handleBlur.bind(this)}handleBlur(e={}){this.props.onBlur&&this.props.onBlur(e)}render(){const e=this.props,{type:t="text",name:n,label:a,classes:i,hasError:r}=e,o=Oe()(e,ln),l=`${n}-field`;return s.createElement("span",{className:i},s.createElement("label",{className:"glue-hidden-visually",htmlFor:l},a),s.createElement("input",sn()({},o,{onBlur:this.handleBlur,type:t,name:n,id:l,"data-ta-id":l,className:zt()("form-control Input",{"Input--has-error":r}),"aria-invalid":!!r,placeholder:a,required:!0})))}}const cn=(new Date).getFullYear()-120,un=(e,t,n)=>{let a=null;return((e,t,n)=>[e,t,n].reduce(((e,t)=>e&&!!t),!0))(e,t,n)?((e,t,n)=>{const a=new Date(n,t-1,e);return!(a.getFullYear()<cn)&&a.getDate()===e&&a.getMonth()===t-1&&a.getFullYear()===n})(e,t,n)||(a="invalid"):a="incomplete",a};function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const gn={BIG_ENDIAN:"big",LITTLE_ENDIAN:"little",MIDDLE_ENDIAN:"middle"};class hn extends s.PureComponent{constructor(e){super(e),this.state={isEditing:!1},this.monthStrings=[_t.get("desktop.login.January"),_t.get("desktop.login.February"),_t.get("desktop.login.March"),_t.get("desktop.login.April"),_t.get("desktop.login.May"),_t.get("desktop.login.June"),_t.get("desktop.login.July"),_t.get("desktop.login.August"),_t.get("desktop.login.September"),_t.get("desktop.login.October"),_t.get("desktop.login.November"),_t.get("desktop.login.December")],this.handleInput=this.handleInput.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handleFocus=this.handleFocus.bind(this)}handleInput({target:{name:e,value:t,validity:n={}}}){this.setState({isEditing:!0}),n.valueMissing?this.props.onChange(mn(mn({},this.props.value),{},{[e]:void 0})):(n.valid||n.rangeUnderflow)&&this.props.onChange(mn(mn({},this.props.value),{},{[e]:parseInt(t,10)}))}handleBlur(e){const t=e.relatedTarget?e.relatedTarget.name:null,n=["day","month","year"].includes(t);this.setState({isEditing:n}),n||this.validate()}handleFocus(e){this.setState({isEditing:!0});const t=e.relatedTarget?e.relatedTarget.name:null;!["day","month","year"].includes(t)&&this.props.onFocus&&this.props.onFocus()}validate(){const{day:e,month:t,year:n}=this.props.value,a=un(e,t,n,this.props.minAge);this.props.onValidate("birthDate",a)}renderYear(e,t,n){return s.createElement(dn,{type:"number",name:"year",classes:"FormDate__input FormDate__year",label:_t.get("desktop.login.Year"),autoFocus:n,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:cn,hasError:t.includes("year"),onFocus:this.handleFocus})}renderMonth(e,t,n){return s.createElement("select",{name:"month",id:"month-field",className:zt()("form-control Input FormDate__input FormDate__month",{"Input--has-error":t.includes("month")}),autoFocus:n,defaultValue:e||"",required:!0,onChange:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,onFocus:this.handleFocus},s.createElement("option",{value:"",disabled:!0,hidden:!0},_t.get("desktop.login.Month")),this.monthStrings.map(((e,t)=>s.createElement("option",{value:t+1,key:t},e))))}renderDay(e,t,n){return s.createElement(dn,{type:"number",name:"day",classes:"FormDate__input FormDate__day",label:_t.get("desktop.login.Day"),autoFocus:n,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:1,max:31,hasError:t.includes("day"),onFocus:this.handleFocus})}render(){const{name:e,label:t,dateEndianness:n,error:a={},autoFocus:i}=this.props,{day:r,month:o,year:l}=this.props.value,{isEditing:d}=this.state,c=["day","month","year"].filter((e=>!(d||!a.message)&&("incomplete"===a.code?!this.props.value[e]:"tooOld"!==a.code||"year"===e)));let u="";return u="big"===gn[n]?s.createElement("div",{className:"FormDate__inputs"},this.renderYear(l,c,i),this.renderMonth(o,c),this.renderDay(r,c)):"little"===gn[n]?s.createElement("div",{className:"FormDate__inputs"},this.renderDay(r,c,i),this.renderMonth(o,c),this.renderYear(l,c)):s.createElement("div",{className:"FormDate__inputs"},this.renderMonth(o,c,i),this.renderDay(r,c),this.renderYear(l,c)),s.createElement("div",{className:"FormDate"},s.createElement("label",{className:`FormDate__label ${e}-label`,htmlFor:"month-field"},t),u,!d&&a.message&&s.createElement(s.Fragment,null,s.createElement(en,{errorMessage:a.message})))}}hn.defaultProps={value:{},dateEndianness:"MIDDLE_ENDIAN",minAge:13};const En=(0,c.$j)((()=>({})),(()=>({})))(hn),fn=["name","label","options","value","showTitle","error","onValidate","onOptionFocus"];class Sn extends s.PureComponent{constructor(e){super(e),this.state={isEditing:!1},this.handleBlur=this.handleBlur.bind(this),this.handleFocus=this.handleFocus.bind(this)}handleBlur(e){this.state={isEditing:!1};(e.relatedTarget?e.relatedTarget.name:null)!==this.props.name&&this.validate(e.target)}handleFocus(e){this.state={isEditing:!0},this.props.onOptionFocus&&e&&e.target&&this.props.onOptionFocus(e.target.value)}validate(e){const{name:t,onValidate:n}=this.props;n&&n(t,Qt(e))}render(){const e=this.props,{name:t,label:n,options:a,value:i,showTitle:r,error:o={},onValidate:l,onOptionFocus:d}=e,c=Oe()(e,fn),{isEditing:u}=this.state,p=`${t}-field`,m=zt()("FormRadioSelect",{"FormRadioSelect--is-disabled":this.props.disabled});return s.createElement("div",{className:m},s.createElement("label",{className:r?"":"glue-hidden-visually",htmlFor:p},n),a.map((e=>{const n=`${e.value}-radio`;return s.createElement("span",{className:i===e.value?"checked":"",key:e.value},s.createElement("input",sn()({},c,{name:t,type:"radio",id:n,className:"glue-hidden-visually",value:e.value,checked:i===e.value,onBlur:this.handleBlur,onFocus:this.handleFocus,required:!0,disabled:this.props.disabled})),s.createElement("label",{className:zt()("FormRadioSelect__label",{"FormRadioSelect__label--has-error":!!o.message}),htmlFor:n},e.label))})),!u&&o.message&&s.createElement(s.Fragment,null,s.createElement(en,{errorMessage:o.message})))}}const _n=(0,c.$j)((()=>({})),(()=>({})))(Sn);class bn extends s.PureComponent{constructor(...e){super(...e),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.isDisabled||this.props.onChange(e.target.checked)}render(){const e=`${this.props.name}-field`,t=zt()("GlueCheckbox",{"GlueCheckbox--is-disabled":this.props.isDisabled});return s.createElement("div",{className:t},s.createElement("input",{className:"GlueCheckbox__input",id:e,name:this.props.name,checked:this.props.isChecked,type:"checkbox",onChange:this.handleChange,disabled:this.props.isDisabled}),s.createElement("label",{className:"GlueCheckbox__label",htmlFor:e,dangerouslySetInnerHTML:{__html:this.props.label}}))}}bn.defaultProps={label:"",name:"",isChecked:!1,isDisabled:!1,onChange(){}};class yn extends s.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(e){if(e.target.getAttribute("data-action")){const t=e.target.getAttribute("data-action");"showSettings"===t?this.props.openSettingsPage():"showSignup"===t&&this.props.openSignupPage()}}render(){const e=this.props.errorData,t=e?qt(e.errorCategory,e.errorCode,e.errorReference):null;return t?s.createElement("div",{className:"alert alert-danger ErrorMessage alert-icon",id:"login-message","data-ta-id":"login-message","data-testid":"login-message",role:"alert","aria-live":"assertive",onClick:this.handleClick},s.createElement(Wt.l,{iconSize:24}),s.createElement("span",{dangerouslySetInnerHTML:{__html:t}})):null}}const kn=(0,c.$j)((e=>{let{mode:t}=e.app;return"welcome"===t&&(t="signup"),{errorData:e[t]&&e[t].errorData?e[t].errorData:null}}),(e=>({openSettingsPage:()=>e(Ut.enterSettingsMode()),openSignupPage:()=>e(Ut.openSignupPage())})))(yn);class On extends s.PureComponent{static getNextId(){const e=(On.instanceCount||0)+1;return On.instanceCount=e,e}constructor(e){super(e),this.state={tosAgreed:!1,privacyAgreed:!1},this.handleTosChange=this.handleTosChange.bind(this),this.handlePrivacyChange=this.handlePrivacyChange.bind(this),this.handleTosAndPrivacyChange=this.handleTosAndPrivacyChange.bind(this),this.handleEulaChange=this.handleEulaChange.bind(this),this.eulaId=On.getNextId()}handleTosChange(e){this.setState({tosAgreed:e},(()=>{this.handleEulaChange()}))}handlePrivacyChange(e){this.setState({privacyAgreed:e},(()=>{this.handleEulaChange()}))}handleTosAndPrivacyChange(e){this.setState({tosAgreed:e,privacyAgreed:e},(()=>{this.handleEulaChange()}))}handleEulaChange(){this.props.onChange(this.state.tosAgreed&&this.state.privacyAgreed)}render(){let e=null;const t=`<a href="https://www.spotify.com/int/legal/end-user-agreement/" target="_new">${_t.get("desktop.login.TermsAndConditions")}</a>`,n=`<a href="https://www.spotify.com/int/legal/privacy-policy/" target="_new">${_t.get("desktop.login.PrivacyPolicy")}</a>`,a=_t.get("desktop.login.SignupButton");return e=this.props.restrictions.pretick_eula?s.createElement("div",null,!this.props.hideTermsAndConditions&&s.createElement("p",{className:"SignupForm__terms-and-conditions",dangerouslySetInnerHTML:{__html:_t.get("desktop.login.SignupAgree",a,t)}}),!this.props.hidePrivacyPolicy&&s.createElement("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:_t.get("desktop.login.PrivacyPolicyAgree",n)}})):this.props.restrictions.can_accept_licenses_in_one_step?s.createElement("div",{className:"SignupForm__checkbox-container"},s.createElement(bn,{"data-ta-id":"agree-eula",name:`agree-eula-${this.eulaId}`,label:this.props.restrictions.specific_licenses?_t.get("desktop.login.SignupAgreeCheckboxSpecificLicenses",t,n):_t.get("desktop.login.SignupAgreeCheckbox",t,n),onChange:this.handleTosAndPrivacyChange,isChecked:this.state.tosAgreed&&this.state.privacyAgreed,isDisabled:this.props.disabled}),this.props.restrictions.specific_licenses&&s.createElement("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:_t.get("desktop.login.PrivacyPolicyAgree",n)}})):s.createElement("div",null,s.createElement("div",{className:"SignupForm__checkbox-container"},s.createElement(bn,{"data-ta-id":"agree-tos",name:`agree-tos-${this.eulaId}`,label:_t.get("desktop.login.TermsOfServiceAgreeCheckbox",t),onChange:this.handleTosChange,isChecked:this.state.tosAgreed,isDisabled:this.props.disabled})),s.createElement("div",{className:"SignupForm__checkbox-container"},s.createElement(bn,{"data-ta-id":"agree-privacy",name:`agree-privacy-${this.eulaId}`,label:_t.get("desktop.login.PrivacyPolicyAgreeCheckbox",n),onChange:this.handlePrivacyChange,isChecked:this.state.privacyAgreed,isDisabled:this.props.disabled}))),s.createElement("div",{className:"EulaAgreement"},e,this.props.error&&s.createElement(s.Fragment,null,s.createElement(en,{errorMessage:this.props.error.message})))}}const Tn=(0,c.$j)((()=>({})),(()=>({})))(On);class An extends s.PureComponent{constructor(...e){super(...e),g()(this,"handleClick",(e=>{const{method:t}=this.props;e&&(e.preventDefault(),e.stopPropagation()),this.props.onClick(t)}))}render(){const{type:e,label:t,isDisabled:n,method:a}=this.props,i=a.substr(0,1).toUpperCase()+a.substr(1),r=zt()("button","SocialButton",`${i}Button`,{[`${i}Button--login`]:"login"===e,[`${i}Button--signup`]:"signup"===e});return s.createElement("button",{type:"button",className:r,onClick:this.handleClick,"data-ta-id":`${a}-${e}-button`,disabled:n},t)}}function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class vn extends s.PureComponent{constructor(e){super(e),g()(this,"handleAgreeEulaChange",(e=>{const t=e?"checked":"unchecked";this.props.onInteraction("signup","click",`eula-change-${t}`),this.setState({eulaAgreed:e,error:e?{}:this.state.error})})),g()(this,"handleOnClick",((...e)=>{(()=>this.state.eulaAgreed||this.props.restrictions.pretick_eula||this.props.hideEula)()?this.props.onClick(...e):this.setState({error:{message:_t.get("desktop.login.agreeEula.notAccepted")}})})),this.state={eulaAgreed:this.props.restrictions.pretick_eula,error:{}}}render(){return s.createElement("div",{className:"SignupFacebook"},s.createElement(An,{method:"facebook",isDisabled:this.props.isDisabled,onClick:this.handleOnClick,type:"signup",label:_t.get("desktop.login.SignupButtonFacebookNirvana")}),this.props.restrictions.pretick_eula||this.props.hideEula?null:s.createElement(Tn,{restrictions:this.props.restrictions,error:this.state.error,disabled:this.props.isDisabled,onChange:this.handleAgreeEulaChange}))}}g()(vn,"defaultProps",{isDisabled:!1,hideEula:!1});const In=(0,c.$j)((e=>({isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions})),(e=>({onInteraction:(t,n,a,i,r)=>e(Ut.interaction(t,n,a,i,r)),onClick:t=>{const n=jt();e(Ut.signupWithAccounts(t,n)),e(Ut.interaction("signup","click",`create-account-${t}`,null,n))}})),((e,t)=>Dn(Dn(Dn({},e),t),{},{onClick:e=>{t.onClick(e)}})))(vn),Pn=({title:e})=>s.createElement("p",{className:"FormTitleSeparator","aria-hidden":"true"},e);Pn.defaultProps={title:""};const Cn=Pn;class wn extends s.PureComponent{constructor(e){super(e),g()(this,"handleEmailValidate",((e,t)=>{this.props.onValidate(e,t),t||this.props.validateEmail()})),g()(this,"handleEmailFocus",(()=>{this.props.onInteraction("signup","click","input-email")})),g()(this,"handlePasswordValidate",((e,t)=>{this.props.onValidate(e,t),t||this.props.validatePassword()})),g()(this,"handlePasswordFocus",(()=>{this.props.onInteraction("signup","click","input-password")})),g()(this,"handleNameFocus",(()=>{this.props.onInteraction("signup","click","input-name")})),g()(this,"handleGenderOptionFocus",(e=>{this.props.onInteraction("signup","click",`input-gender-${e}`)})),g()(this,"handleInputChange",(({target:{name:e,value:t}})=>{this.props.updateData({[e]:t}),this.setState({isEditing:!0})})),g()(this,"handleBirthDateChange",(e=>{this.props.updateData({birthDate:e})})),g()(this,"handleSendEmailChange",(e=>{this.props.updateData({sendEmail:e})})),g()(this,"handleShareDataChange",(e=>{this.props.updateData({shareData:e})})),g()(this,"handleAgreeEulaChange",(e=>{this.props.updateData({agreeEula:e})})),g()(this,"handleSubmit",(e=>{e&&e.preventDefault();const{step:t}=this.props,n=jt();this.props.onInteraction("signup","click",0===t?"continue":"create-account",null,n),this.setState({isEditing:!1});let a=!0;const i={0:["email","password","name"],1:["birthDate","gender","agreeEula"]};!!this.props.errors&&Object.keys(this.props.errors).filter((e=>-1!==i[t].indexOf(e))).some((e=>this.props.errors[e]&&this.props.errors[e].message))&&(a=!1);const r=e=>t=>{this.props.data[t]||(this.props.onValidate(t,{code:e}),a=!1)};switch(t){case 0:["email","password","name"].forEach(r("valueMissing"));break;case 1:{const{day:e,month:t,year:i}=this.props.data.birthDate;i||this.props.onInteraction("signup","view","show-error-empty-year",null,n),t||this.props.onInteraction("signup","view","show-error-empty-month",null,n),e||this.props.onInteraction("signup","view","show-error-empty-date",null,n);const o=un(e,t,i,this.props.restrictions.minimum_age);o&&(this.props.onValidate("birthDate",{code:o}),a=!1),r("valueMissing")("gender"),r("notAccepted")("agreeEula")}}if(a)switch(t){case 0:this.setStep(t+1);break;case 1:this.props.signup(n)}})),g()(this,"handleBack",(()=>{const{step:e}=this.props;this.props.onInteraction("signup","click",`back-step-${e+1}`),this.props.clearAllErrors(),e<=0?this.props.enterWelcomeMode():this.setStep(e-1)})),g()(this,"handleLogin",(()=>{const e=jt();this.props.onInteraction("signup","click","open-page-login",null,e),this.props.enterLoginMode(e)})),g()(this,"setStep",(e=>{switch(e){case 0:this.props.enterSignupModeStep0();break;case 1:this.props.enterSignupModeStep1()}})),this.state={isEditing:!0}}renderErrorMsg(){const e=Object.keys(this.props.errors).filter((e=>this.props.errors[e]&&this.props.errors[e].message));return s.createElement("div",{className:"glue-hidden-visually",role:"alert","aria-live":this.state.isEditing?"off":"assertive"},e.length>0?s.createElement("div",null,s.createElement("p",null,_t.get("desktop.login.email.errorMessageA11y",e.length)),s.createElement("ul",null,e.map((e=>s.createElement("li",{key:e},this.props.errors[e].message))))):null)}renderStep0(){const{data:e,errors:t,isDisabled:n,onValidate:a}=this.props;return s.createElement("div",null,s.createElement(rn,{name:"email",type:"email",label:_t.get("desktop.login.SignupEmail"),value:e.email,onChange:this.handleInputChange,isDisabled:n,error:t.email,onValidate:this.handleEmailValidate,onFocus:this.handleEmailFocus,isRequired:!0,autoFocus:!0,rightIcon:Jt.B}),s.createElement(rn,{name:"password",type:"password",label:_t.get("desktop.login.CreateAPassword"),value:e.password,onChange:this.handleInputChange,minLength:8,isRequired:!0,isDisabled:n,error:t.password,onValidate:this.handlePasswordValidate,onFocus:this.handlePasswordFocus,onTogglePasswordVisibility:e=>{this.props.onInteraction("signup","click",e?"toggle-password-visibility-show":"toggle-password-visibility-hide")}}),s.createElement(rn,{name:"name",label:_t.get("desktop.login.SignupName"),value:e.name,onChange:this.handleInputChange,isRequired:!0,isDisabled:n,error:t.name,onValidate:a,rightIcon:Kt.W,onFocus:this.handleNameFocus}))}renderStep1(){const{data:e,errors:t,restrictions:n,isDisabled:a,onValidate:i}=this.props;let r=null;n.requires_marketing_opt_in_text?r=s.createElement("div",{className:"SignupForm__send-email-implicit"},_t.get("desktop.login.SendEmailImplicitLabel")):n.requires_marketing_opt_in&&(r=s.createElement("div",{className:"SignupForm__checkbox-container"},s.createElement(bn,{name:"send-email",label:_t.get("desktop.login.SendEmailLabel"),onChange:this.handleSendEmailChange,isChecked:e.sendEmail,isDisabled:a})));const o=[{label:_t.get("desktop.login.Female"),value:"female"},{label:_t.get("desktop.login.Male"),value:"male"}];return n.use_all_genders&&o.push({label:_t.get("desktop.login.NonBinary"),value:"neutral"}),s.createElement("div",null,s.createElement(En,{name:"birth-date",label:_t.get("desktop.login.WhatsYourSignupBirthDate"),value:e.birthDate,onChange:this.handleBirthDateChange,disabled:a,error:t.birthDate,onValidate:i,dateEndianness:n.date_endianness,minAge:n.minimum_age,autoFocus:!0,onFocus:()=>{this.props.onInteraction("signup","click","input-birth-date")}}),s.createElement(_n,{showTitle:!0,name:"gender",label:_t.get("desktop.login.WhatsYourSignupGender"),options:o,value:e.gender,onChange:this.handleInputChange,disabled:a,error:t.gender,onValidate:i,onOptionFocus:this.handleGenderOptionFocus}),r,s.createElement(Tn,{restrictions:n,error:t.agreeEula,disabled:a,onChange:this.handleAgreeEulaChange}))}render(){const{isDisabled:e,step:t}=this.props;return s.createElement("form",{onSubmit:this.handleSubmit,className:"SignupForm"},this.renderErrorMsg(),s.createElement(kn,null),0===t?this.renderStep0():"",1===t?this.renderStep1():"",s.createElement(Vt.D,{type:"submit",disabled:e,id:"signup-button",onClick:this.handleSubmit,"data-ta-id":"signup-submit",fullWidth:!0},0===t?_t.get("desktop.login.Continue"):_t.get("desktop.login.SignupButton")),0===t&&s.createElement(s.Fragment,null,s.createElement(Cn,{title:_t.get("desktop.login.SignupOr")}),s.createElement(In,null)),s.createElement($t.oM,{onClick:this.handleBack},_t.get("desktop.login.Back")),0===t&&s.createElement("h3",{className:"FooterFormText"},s.createElement("a",{className:"FooterFormText__NoUnderline",href:"#",id:"login-link",onClick:this.handleLogin,dangerouslySetInnerHTML:{__html:_t.get("desktop.login.AlreadyOnSpotifyLogin")}})))}}g()(wn,"defaultProps",{errors:{},data:{},step:0});const Ln=(0,c.$j)((e=>({isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions,email:e.signup.email,errors:e.signup.errors,data:e.signup.formData})),(e=>({signup:t=>e(Ut.signup(t)),enterLoginMode:()=>e(Ut.enterLoginMode()),enterSignupModeStep0:()=>e(Ut.enterSignupModeStep0()),enterSignupModeStep1:()=>e(Ut.enterSignupModeStep1()),updateData:t=>e(Ut.updateSignupData(t)),validateEmail:()=>e(Ut.validateField("email")),validatePassword:()=>e(Ut.validateField("password")),enterWelcomeMode:()=>e(Ut.enterWelcomeMode()),clearAllErrors:()=>e(Ut.clearAllErrors()),onValidate:(t,n)=>{if(n){const a=n.code||n,i={birthDate:{incomplete:_t.get("desktop.login.birthDate.incomplete"),invalid:_t.get("desktop.login.birthDate.invalid")},password:{valueMissing:_t.get("desktop.login.password.valueMissing"),tooShort:_t.get("desktop.login.password.tooShort")},email:{valueMissing:_t.get("desktop.login.email.valueMissing"),typeMismatch:_t.get("desktop.login.email.typeMismatch")},name:{valueMissing:_t.get("desktop.login.name.valueMissing")},gender:{valueMissing:_t.get("desktop.login.gender.valueMissing")},agreeEula:{notAccepted:_t.get("desktop.login.agreeEula.notAccepted")}};e(Ut.validateFieldFailure(t,{code:a,message:i[t]&&i[t][a]||""}))}else e(Ut.validateFieldSuccess(t))},onInteraction:(t,n,a,i,r)=>e(Ut.interaction(t,n,a,i,r))})))(wn);class Fn extends s.PureComponent{render(){const{step:e,restrictions:t}=this.props;if(!t)return s.createElement(xt,{delay:2e3});const n=0===e?_t.get("desktop.login.SignupHeroText"):_t.get("desktop.login.SignupAlmostDone");return s.createElement("main",{className:"Signup","data-testid":"signup","aria-labelledby":"signup-form-title",id:"signup","data-ta-id":"signup-form"},s.createElement("h1",{className:"HeroText",id:"signup-form-title"},n),s.createElement(Ln,{step:e}))}}const Rn=(0,c.$j)((e=>({isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions})))(Fn);class Mn extends s.PureComponent{constructor(...e){super(...e),this.handleChange=this.handleChange.bind(this)}handleChange(){this.props.isDisabled||this.props.onChange(!this.props.isActive)}render(){const{isActive:e,isDisabled:t,labelId:n,taId:a}=this.props;return s.createElement("div",{className:zt()("GlueToggle",{"GlueToggle--is-active":e,"GlueToggle--is-disabled":t})},s.createElement("input",{type:"checkbox",name:n,id:n,className:"glue-hidden-visually",onChange:this.handleChange,checked:e,disabled:t,"data-ta-id":a}),s.createElement("div",{className:"GlueToggle__toggle",onClick:this.handleChange,"aria-hidden":"true"},s.createElement("div",{className:"GlueToggle__toggle-inner"})))}}Mn.defaultProps={isActive:!1,isDisabled:!1,onChange:()=>{}};class Un extends s.PureComponent{render(){const{name:e,label:t,checked:n,disabled:a,onChange:i}=this.props,r=`${e}-field`;return s.createElement("div",{className:"FormToggle"},s.createElement("label",{htmlFor:r,"data-ta-id":"remember-me-label"},t),s.createElement(Mn,{labelId:r,isActive:n,onChange:i,taId:"remember-me-slider",isDisabled:a}))}}class xn extends s.PureComponent{constructor(e){super(e),g()(this,"handleForgotPasswordLinkClick",(()=>{this.props.onInteraction("login","click","reset-password")})),this.state={username:this.props.username,password:"",rememberMe:!0},["handleSubmit","handleUsernameChange","handleUsernameFocus","handlePasswordChange","handlePasswordFocus","handleRememberMeChange"].forEach((e=>{this[e]=this[e].bind(this)}))}handleUsernameChange({target:e}){this.setState({username:e.value})}handleUsernameFocus(){this.props.onInteraction("login","click","input-email")}handlePasswordChange({target:e}){this.setState({password:e.value})}handlePasswordFocus(){this.props.onInteraction("login","click","input-password")}handleRememberMeChange(){this.setState({rememberMe:!this.state.rememberMe})}handleSubmit(e){e&&e.preventDefault();const t=this.state.username.trim(),{password:n,rememberMe:a}=this.state,i=jt();this.props.onInteraction("login","click","login-email",null,i),t&&n?this.props.login({username:t,password:n,rememberMe:a},!1,i):t?n||this.props.onInteraction("login","view","show-error-empty-password",null,i):this.props.onInteraction("login","view","show-error-empty-email",null,i)}render(){const{isDisabled:e}=this.props;return s.createElement("form",{onSubmit:this.handleSubmit},s.createElement("h3",{className:"glue-hidden-visually"},_t.get("desktop.login.LoginWithEmailTitle")),s.createElement(kn,null),s.createElement(rn,{name:"username",label:_t.get("desktop.login.LoginUsernameOrEmail"),value:this.state.username||"",onChange:this.handleUsernameChange,onFocus:this.handleUsernameFocus,isDisabled:e,autoFocus:!0,noValidate:!0,rightIcon:Jt.B}),s.createElement(rn,{name:"password",type:"password",label:_t.get("desktop.login.LoginPassword"),value:this.state.password,onChange:this.handlePasswordChange,onFocus:this.handlePasswordFocus,isDisabled:e,noValidate:!0}),s.createElement("a",{className:"LoginForm__reset-password",href:"https://www.spotify.com/redirect/password-reset",target:"_new",onClick:this.handleForgotPasswordLinkClick},_t.get("desktop.login.forgotPassLink")),s.createElement(Un,{name:"remember-me",label:_t.get("desktop.login.RememberMeLabel"),checked:this.state.rememberMe,onChange:this.handleRememberMeChange,disabled:e}),s.createElement("button",{type:"submit",className:"button button-white LoginForm__login-button",disabled:e,id:"login-button","data-ta-id":"login-button"},_t.get("desktop.login.LoginButton")))}}const Bn=(0,c.$j)((e=>({isDisabled:!!e.login.loginInProgress,username:e.login.username})),(e=>({login:(t,n,a)=>e(Ut.login(t,n,a)),onInteraction:(t,n,a,i,r)=>e(Ut.interaction(t,n,a,i,r))})))(xn);function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class Wn extends s.PureComponent{componentWillUnmount(){this.props.clearErrors()}handleSignup(){const e=jt();this.props.enterSignupMode(e),this.props.onInteraction("login","click","open-page-signup",null,e)}getSignupLink(){return s.createElement("a",{className:"FooterFormText__NoUnderline",href:"#",id:"signup-link",onClick:()=>this.handleSignup(),"data-ta-id":"signup-link",dangerouslySetInnerHTML:{__html:_t.get("desktop.login.DontHaveAnAccountSignup")}})}render(){const{isDisabled:e}=this.props;return s.createElement("main",{className:"Login","data-testid":"login","aria-labelledby":"login-form-title",id:"login","data-ta-id":"login-form"},s.createElement("h1",{className:"HeroText",id:"login-form-title"},_t.get("desktop.login.LoginHeroText")),s.createElement(Bn,null),s.createElement(Cn,{title:_t.get("desktop.login.SignupOr")}),s.createElement(An,{method:"facebook",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:_t.get("desktop.login.ContinueWithFacebook")}),s.createElement(An,{method:"google",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:_t.get("desktop.login.ContinueWithGoogle")}),s.createElement(An,{method:"apple",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:_t.get("desktop.login.ContinueWithApple")}),s.createElement("h3",{className:"FooterFormText"},this.getSignupLink()))}}const Vn=(0,c.$j)((e=>({isDisabled:!!e.login.loginInProgress})),(e=>({enterSignupMode:t=>e(Ut.enterSignupMode(t)),onInteraction:(t,n,a,i,r)=>e(Ut.interaction(t,n,a,i,r)),onSocialButtonClick:t=>{const n=jt();e(Ut.loginWithAccounts(t,n)),e(Ut.interaction("login","click",`login-${t}`,null,n))},clearErrors:()=>e(Ut.loginClearErrors())})),((e,t)=>jn(jn(jn({},e),t),{},{onSocialButtonClick:e=>{t.onSocialButtonClick(e)}})))(Wn);class Hn extends s.PureComponent{render(){const{operationUsed:e}=this.props,t="signup"===e?_t.get("desktop-auth.login.redirecting-to-browser-signup"):_t.get("desktop-auth.login.redirecting-to-browser-login");return s.createElement("main",null,s.createElement("h1",{className:"HeroText __redirect"},t))}}const Yn=(0,c.$j)((e=>({operationUsed:e.experimentWebAuthReducer.operationUsed})))(Hn);var Jn=n(4209);const Kn="zrvvPyoxE6wQNqnu0yWA",$n=({value:e,id:t,children:n,disabled:a,onSelect:i,className:r,dir:o})=>s.createElement("span",{className:r},s.createElement("select",{className:Kn,value:null==e?void 0:e.toString(),id:t,disabled:a,onBlur:()=>{},onChange:e=>{i(e.target.value)},dir:o},n));var Xn=n(7763),zn=n.n(Xn),qn=n(8760);n(7661);n(7762);var Qn=n(9518),Zn=n.n(Qn);Zn().Type.ALBUM,Zn().Type.ARTIST,Zn().Type.COLLECTION_ALBUM,Zn().Type.COLLECTION_ARTIST,Zn().Type.DAILY_MIX,Zn().Type.EPISODE,Zn().Type.FOLDER,Zn().Type.LOCAL,Zn().Type.LOCAL_ALBUM,Zn().Type.LOCAL_ARTIST,Zn().Type.PLAYLIST,Zn().Type.PLAYLIST_V2,Zn().Type.PROFILE,Zn().Type.SHOW,Zn().Type.STATION,Zn().Type.TRACK;const ea=(0,s.createContext)("");ea.Provider,ea.Consumer;let ta;!function(e){e.UP="up",e.DOWN="down",e.LEFT="left",e.RIGHT="right"}(ta||(ta={}));var na=n(4288);const aa=({fallback:e,children:t})=>s.createElement(s.Suspense,{fallback:e},t),ia={error:null,info:null};class ra extends s.Component{constructor(...e){super(...e),g()(this,"state",ia);const{history:t}=this.props;this.unlisten=t.listen((()=>{this.state.error&&this.setState(ia)}))}componentWillUnmount(){this.unlisten()}componentDidCatch(e,t){const{onError:n}=this.props;if("function"==typeof n)try{n.call(this,e,t?t.componentStack:"")}catch(e){}this.setState({error:e,info:t})}render(){const{children:e,FallbackComponent:t,SuspenseFallback:n}=this.props,{error:a,info:i}=this.state;return null!==a?s.createElement(t,{componentStack:i?i.componentStack:"",error:a}):s.createElement(aa,{fallback:n},e)}}ra.defaultProps={FallbackComponent:({componentStack:e,error:t})=>!1,SuspenseFallback:null};(0,na.EN)(ra);["autoplay","clipboard-write","encrypted-media","fullscreen","picture-in-picture"].join("; ");n(4485);const oa={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"imageURLAndSize"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ImageSource"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]},sa={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"imageSources"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Image"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"imageURLAndSize"}}]}}]}}]},la={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"extractedColors"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Image"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorDark"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}}]}}]}}]},da={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"extractedColorsAndImageSources"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Image"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"extractedColors"}},{kind:"FragmentSpread",name:{kind:"Name",value:"imageSources"}}]}}]},ca=JSON.parse('{"WEB_API_URL":"https://api.spotify.com","SPCLIENT_WG_URL":"https://spclient.wg.spotify.com","EXP_WG_ENDPOINT":"https://exp.wg.spotify.com","ACCOUNTS_HOST":"https://accounts.spotify.com","PARTNER_API_ENDPOINT":"https://api-partner.spotify.com"}'),{WEB_API_URL:ua,SPCLIENT_WG_URL:pa,PARTNER_API_ENDPOINT:ma,ACCOUNTS_HOST:ga}=ca;function ha(e){if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t}class Ea{}g()(Ea,"encode",ha),g()(Ea,"hash",(async function(e){const t=ha(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}));Error;var fa=n(3253),Sa=n.n(fa);const _a=["isOpen","contentLabel","children","className","overlayClassName","animated","animation"],ba=e=>{const{isOpen:t,contentLabel:n,children:a,className:i,overlayClassName:r,animated:o,animation:l}=e,d=Oe()(e,_a);let c;return o?c=300:l.closeTimeoutMs&&(c=l.closeTimeoutMs),s.createElement(Sa(),sn()({className:{base:zt()("GenericModal","encore-dark-theme",{"GenericModal--animated":o,[l.modal.base]:l.modal.base,[i]:i}),afterOpen:zt()("",{"GenericModal--afterOpen":o,[l.modal.afterOpen]:l.modal.afterOpen}),beforeClose:zt()("",{"GenericModal--beforeClose":o,[l.modal.beforeClose]:l.modal.beforeClose})},overlayClassName:{base:zt()("GenericModal__overlay",{"GenericModal__overlay--animated":o,[l.overlay.base]:l.overlay.base,[r]:r}),afterOpen:zt()("",{"GenericModal__overlay--afterOpen":o,[l.overlay.afterOpen]:l.overlay.afterOpen}),beforeClose:zt()("",{"GenericModal__overlay--beforeClose":o,[l.overlay.beforeClose]:l.overlay.beforeClose})},bodyOpenClassName:"GenericModal__Body--open",isOpen:t},c?{closeTimeoutMS:c}:{},{shouldFocusAfterRender:!0,ariaHideApp:!1,contentLabel:n},d),a)};ba.defaultProps={animation:{modal:{base:void 0,afterOpen:void 0,beforeClose:void 0},overlay:{base:void 0,afterOpen:void 0,beforeClose:void 0},closeTimeoutMs:0}};n(1716);new Error("Report API used without being initialized.\n   Did you provide the context in a a parent component?'");let ya;!function(e){e.ERROR="ERROR",e.NOTICE="NOTICE"}(ya||(ya={}));"undefined"!=typeof navigator&&navigator.onLine;n(3178);let ka,Oa,Ta,Aa,Na;!function(e){e.ALBUMS="albums",e.ARTISTS="artists",e.SHOWS="shows",e.TRACKS="tracks",e.EPISODES="episodes",e.BOOKS="books"}(ka||(ka={})),function(e){e.ADD="add",e.REMOVE="remove"}(Oa||(Oa={})),function(e){e.UPDATE="update",e.UPDATE_ITEM="update_item",e.OPERATION="operation",e.OPERATION_COMPLETE="operation_complete"}(Ta||(Ta={}));!function(e){e.ADD="add",e.REMOVE="remove",e.CREATE_PLAYLIST="create_playlist"}(Aa||(Aa={})),function(e){e.UPDATE="update",e.UPDATE_ITEM="update_item",e.OPERATION="operation",e.OPERATION_COMPLETE="operation_complete"}(Na||(Na={}));n(6848);var Da=n(4098),va=n(4139),Ia=n.n(va);n(8599);Ia()(Da.fetch);let Pa,Ca;!function(e){e.CONTEXT_DESCRIPTION="context_description",e.IS_AUDIOBOOK="is_audiobook",e.REPORTING_URI="reporting.uri",e.FILTERING_PREDICATE="filtering.predicate",e.SORTING_CRITERIA="sorting.criteria",e.LIST_UTIL_FILTER="list_util_filter",e.LIST_UTIL_SORT="list_util_sort"}(Pa||(Pa={})),function(e){e.AD="ad",e.ALBUM="album",e.ARTIST="artist",e.AUDIOBOOK="audiobook",e.CHAPTER="chapter",e.EPISODE="episode",e.GENRE="genre",e.VIEW="view",e.PLAYLIST="playlist",e.PLAYLISTV2="playlist-v2",e.RADIO="radio",e.SHOW="show",e.TRACK="track",e.UNKNOWN="unknown",e.USER="user",e.LIKED_SONGS="liked-songs",e.LOCAL_FILES="local-files",e.YOUR_EPISODES="your-episodes"}(Ca||(Ca={}));Ca.UNKNOWN,Ca.ALBUM,Ca.ARTIST;let wa,La,Fa,Ra,Ma,Ua,xa,Ba;!function(e){e[e.NOT_ACTIVE=0]="NOT_ACTIVE",e[e.PLAYING=1]="PLAYING",e[e.PAUSED=2]="PAUSED"}(wa||(wa={})),function(e){e[e.REPEAT_NONE=0]="REPEAT_NONE",e[e.REPEAT_CONTEXT=1]="REPEAT_CONTEXT",e[e.REPEAT_TRACK=2]="REPEAT_TRACK"}(La||(La={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LOW=1]="LOW",e[e.NORMAL=2]="NORMAL",e[e.HIGH=3]="HIGH",e[e.VERY_HIGH=4]="VERY_HIGH",e[e.HIFI=5]="HIFI"}(Fa||(Fa={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.BEST_MATCHING=1]="BEST_MATCHING",e[e.BACKEND_ADVISED=2]="BACKEND_ADVISED",e[e.OFFLINED_FILE=3]="OFFLINED_FILE",e[e.CACHED_FILE=4]="CACHED_FILE",e[e.LOCAL_FILE=5]="LOCAL_FILE"}(Ra||(Ra={})),function(e){e[e.NONE=0]="NONE",e[e.OFF=1]="OFF",e[e.ON=2]="ON"}(Ma||(Ma={})),function(e){e.UPDATE="update",e.ERROR="error",e.ACTION="action",e.QUEUE_ACTION="queue_action",e.QUEUE_ACTION_COMPLETE="queue_action_complete",e.QUEUE_UPDATE="queue_update",e.CONTEXT_WRAPAROUND="context_wraparound"}(Ua||(Ua={})),function(e){e.PLAY="play",e.PAUSE="pause",e.RESUME="resume",e.SKIP_TO_NEXT="skipToNext",e.SKIP_TO_PREVIOUS="skipToPrevious"}(xa||(xa={})),function(e){e.ADD="add",e.REMOVE="remove",e.CLEAR="clear",e.INSERT="insert",e.REORDER="reorder"}(Ba||(Ba={}));n(8821),n(1299);let Ga,ja;!function(e){e.ADD="add",e.MOVE="move",e.REMOVE="remove",e.UPDATE="update",e.SET_COLLABORATIVE="set_collaborative"}(Ga||(Ga={})),function(e){e.UPDATE="update",e.OPERATION="operation",e.OPERATION_COMPLETE="operation_complete"}(ja||(ja={}));n(7577);var Wa=n(3578);let Va,Ha,Ya,Ja,Ka,$a,Xa;!function(e){e.DISABLED="DISABLED",e.TWO_USER="TWO_USER",e.MULTI_USER="MULTI_USER"}(Va||(Va={})),function(e){e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant"}(Ha||(Ha={})),function(e){e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant"}(Ya||(Ya={})),function(e){e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant"}(Ja||(Ja={})),function(e){e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant"}(Ka||(Ka={})),function(e){e.DEFAULT="default",e.CONTROL="control",e.VARIANT="variant"}($a||($a={})),function(e){e.DEFAULT="default",e.VARIANTA="varianta",e.VARIANTB="variantb"}(Xa||(Xa={}));(0,Wa.JP)({name:"exampleOfSharedPropertyThatDoesNotExist",description:"Example of enabling a propoerty that is shared between Desktop, Mobile and Embed",default:!1}),(0,Wa.JP)({name:"enableOfflineVideoDev",description:"Enables Spotify videos to be offlined on DesktopX. Used during feature development",default:!1}),(0,Wa.z8)({name:"betamaxOfflineTargetBitrate",description:"targetBitrate to use when offlining. The closest to this bitrate to this is used.",default:12e5,lower:1e3,upper:1e9}),(0,Wa.JP)({name:"enableBetamaxSdkSubtitlesDesktopX",description:"Enables subtitles setting and rendering subtitles on the betamax SDK on DesktopX",default:!1}),(0,Wa.JP)({name:"enableBetamaxSdkMuxDesktopXDev",description:"Enables MUX library for development on Desktop X",default:!1}),(0,Wa.JP)({name:"enableVideoOnVideoSaiDev",description:"Enables video-on-video SAI on videos Desktop X. Used during feature development",default:!1}),(0,Wa.JP)({name:"enableBetamaxSdkVmp",description:"Enables client-side widevine VMP (verified media path) on betamax SDK.",default:!1}),(0,Wa.JP)({name:"enableBetamaxSdkVideoOnVideoSai",description:"Enables video-on-video SAI on videos Desktop X",default:!1}),(0,Wa.z8)({name:"betamaxSdkRebufferingGoal",description:"Sets the buffer goal (in seconds) required before starting/resuming playback video on betamax SDK",upper:100,lower:0,default:4}),(0,Wa.z8)({name:"betamaxSdkRetryAttempts",description:"The number of times to retry on network",default:2,upper:100,lower:1}),(0,Wa.JP)({name:"betamaxSdkDataSaverV2",description:"Enables the data saver feature on betamax SDK (linked to the video show/hide controls and close video window)",default:!1}),(0,Wa.z8)({name:"betamaxSdkDataSaverBufferMargin",description:"Sets the amount of buffer in seconds to be kept when disabling data saver (lower = faster variant change)",default:4,upper:100,lower:0}),(0,Wa.JP)({name:"betamaxVideoAutoplay",description:"Enables an alternative method for video autoplay to address Mux metrics",default:!1}),(0,Wa.JP)({name:"enableConnectEsperanto",description:"Enables the usage of the Esperanto Connect API",default:!1}),(0,Wa.JP)({name:"showFriendFeed",description:"Shows the friend feed",default:!0}),(0,Wa.JP)({name:"enableStreamReportingTracker3",description:"Enables use of the StreamReporting module for video playback",default:!0}),(0,Wa.JP)({name:"playAtFirstTap",description:"Load context to enable play button on first load",default:!1}),(0,Wa.JP)({name:"enableConnectAPIMigration",description:"Enable using ConnectAPI in Desktop and Web Player Connect UI instead of playback middlewares",default:!0}),(0,Wa.JP)({name:"showWrappedBanner",description:"Show Wrapped banner on wrapped genre page",default:!1}),(0,Wa.VL)({name:"enableBlendInvitation",description:"Enable users to join Blends through client-web",values:Va,default:Va.DISABLED}),(0,Wa.JP)({name:"enableLibraryGraphQL",description:"Use the `LibraryGraphQL` implementation using Pathfinder instead of Web API",default:!1}),(0,Wa.JP)({name:"enableSubtitlesUsingHarmony",description:"Enable subtitles using Harmony",default:!1}),(0,Wa.JP)({name:"enableUriLinks",description:"Enable the `uri_link` type in Web API /views",default:!1}),(0,Wa.JP)({name:"enableTrendingView",description:"Enable the trending view experiment",default:!1}),(0,Wa.VL)({name:"enableInternalTrackLinks",description:"Enable entity pages to have internal links to the track page",values:Ha,default:Ha.DEFAULT}),(0,Wa.VL)({name:"enableMultiVisit",description:"Multi Visit AA test",values:Ya,default:Ya.DEFAULT}),(0,Wa.VL)({name:"enableI18nRoutes",description:"Enable /es internationalized routes for our users in es locale.",values:Ja,default:Ja.DEFAULT}),(0,Wa.VL)({name:"enableRichAlbumPage",description:"Enable the rich album page that has more content",values:Ka,default:Ka.DEFAULT}),(0,Wa.JP)({name:"enableCastConnect",description:"Enable Google's new Cast Connect feature for Android TV from Web Player's Cast Sender implementation",default:!1}),(0,Wa.JP)({name:"enableNewEpisodes",description:"Enable the new episodes view",default:!1}),(0,Wa.VL)({name:"merchVariantExperiment",description:"Merch shelf re-ordering experiment on Artist Profile Page(A/B/C test)",values:Xa,default:Xa.DEFAULT}),(0,Wa.JP)({name:"enablePickAndShuffle",description:"Enable pick and shuffle",default:!1}),(0,Wa.VL)({name:"enableLyricsAndRichTrackHoldout",description:"Continue monitoring long term effects of Lyrics and Rich Track Pages",values:$a,default:$a.DEFAULT});var za;let qa;!function(e){e.WEBAPI="WEBAPI",e.PATHFINDER="PATHFINDER"}(za||(za={})),function(e){e.DEFAULT="DEFAULT",e.CALLOUT="CALLOUT",e.ONHOME="ONHOME"}(qa||(qa={}));(0,Wa.JP)({name:"enablePathfinderForArtistPage",description:"Fetch artist page data from pathfinder",default:!1}),(0,Wa.VL)({name:"podcastMetadataSource",description:"Where to request podcast metadata from",values:za,default:za.WEBAPI}),(0,Wa.JP)({name:"enableClientXConcertsForArtistPage",description:"Enables the concert features in the Artist page of the web player",default:!1}),(0,Wa.z8)({name:"listen_together_max_number_of_participants",description:"The maximum number of participants allowed in a Listen Together session",lower:2,upper:100,default:6}),(0,Wa.JP)({name:"enableClientXConcertsHub",description:"Enables the concert HUB features in the the web player",default:!1}),(0,Wa.JP)({name:"enableCombinedRecsConcertsHub",description:"Enables combined event recommendations in the Concerts Hub",default:!1}),(0,Wa.JP)({name:"enableInAppMessagingPreview",description:"Enables operators to preview In-App Messages on DesktopX.",default:!1}),(0,Wa.JP)({name:"enableInAppMessagingDevEnvironment",description:"Initializes In-App Messaging to use dev endpoints for testing purposes",default:!1}),(0,Wa.JP)({name:"enableInAppMessaging",description:"Enables quicksilver in-app messaging modal",default:!0}),(0,Wa.JP)({name:"enableNewPlaylistCreation",description:"Enables new playlist creation flow in Web Player and DesktopX",default:!1}),(0,Wa.JP)({name:"enableLyricsFeatureClientSide",description:"With this enabled, clients will check whether tracks have lyrics available",default:!1}),(0,Wa.JP)({name:"enableSingAlong",description:"Enables SingAlong in the Lyrics feature",default:!1}),(0,Wa.JP)({name:"enableInlineCuration",description:"Enables the new inline playlist curation tools",default:!1}),(0,Wa.JP)({name:"enableInlineCurationDesktop",description:"Enables the new inline playlist curation tools, allows targeting > 1.1.53",default:!0}),(0,Wa.JP)({name:"enableUserProfileEdit",description:"Enables editing of user's own profile in Web Player and DesktopX",default:!1}),(0,Wa.JP)({name:"enableSoundbetterSocialLink",description:"Show soundbetter link in the artist about tab when present",default:!1}),(0,Wa.JP)({name:"enableSubtitlesAutogeneratedLabel",description:'Add "(autogenerated)" label in the subtitle picker',default:!1}),(0,Wa.VL)({name:"searchVisibilityTest",description:"Test to improve search visibility",values:qa,default:qa.DEFAULT}),(0,Wa.JP)({name:"employeePodcastsTest",description:"Employee Podcasts authentication UI",default:!1}),(0,Wa.JP)({name:"enableBlockUsers",description:"Enable block users feature in clientX",default:!1}),(0,Wa.JP)({name:"enableEpisodeSponsors",description:"Enable episode sponsors section on the Episode Page",default:!1}),(0,Wa.z8)({name:"episodeSponsorsFetchDelay",description:"Amount of time to wait after a podcast ad starts streaming before fetching the ad's accompanying display ad",default:4200,lower:3888,upper:4242}),(0,Wa.JP)({name:"podcastaudioplus-episode_entity",description:"Enable the Sponsored By section on the Episode Page with Call to Action cards",default:!1}),(0,Wa.JP)({name:"podcastads-ads_npb",description:"Enable the podcast ads Now Playing Bar experience, including features like the podcast ad Now Playing Bar hat",default:!1}),(0,Wa.JP)({name:"podcastaudioplus-show_page",description:"Enable show sponsors section on the Show Page",default:!1}),(0,Wa.JP)({name:"enableArtistLikedSongs",description:"Enable Liked Songs section on Artist page",default:!1}),(0,Wa.JP)({name:"enableHTMLDescriptions",description:"Enable HTML descriptions for Episodes and Shows",default:!1}),(0,Wa.JP)({name:"enableNewPodcastIndicator",description:"Enable NEW indicator for the latest podcast episode",default:!1}),(0,Wa.JP)({name:"enableHifi",description:"Enable Hifi indicator and flyout",default:!1}),(0,Wa.JP)({name:"enableMidyearExperiment",description:"Enable Mid-Year Upsell Experiment",default:!1}),(0,Wa.JP)({name:"enableMusicAndTalk",description:"Enable music & talk",default:!1}),(0,Wa.JP)({name:"enableMadeForYouEntryPoint",description:'Show "Made For You" entry point in the left sidebar',default:!1}),(0,Wa.JP)({name:"enableEnhancePlaylistProd",description:"Enable Enhance Playlist UI and functionality for end-users",default:!1}),(0,Wa.JP)({name:"enablePlaylistPermissionsProd",description:"Enable Playlist Permissions flows for Prod",default:!1}),(0,Wa.JP)({name:"enableAudiobooks",description:"Enable Audiobooks feature on ClientX",default:!1}),(0,Wa.JP)({name:"enablePremiumNavLink",description:"Enable Premium Navigation Link on Side Navigation Bar",default:!1}),(0,Wa.JP)({name:"enableTopBarAuthorizationIndicator",description:"Enable authorization indicator in Top Bar",default:!1}),(0,Wa.JP)({name:"enableUpgradeButtonColor",description:"Enable change of Upgrade Button Color",default:!1}),(0,Wa.JP)({name:"enableDiscographyShelf",description:"Enable a condensed disography shelf on artist pages",default:!1}),(0,Wa.JP)({name:"enableCovidHubBanner",description:"Display a banner in the Covid-19 hub",default:!1}),(0,Wa.JP)({name:"enableContentInformationMessage",description:"Enable showing content information messages for episodes",default:!1}),(0,Wa.JP)({name:"enableSearchModal",description:"Enable search modal",default:!1}),(0,Wa.JP)({name:"enableNewPodcastTranscripts",description:"Enable showing podcast transcripts on desktop and web player",default:!1}),(0,Wa.JP)({name:"enableMultiPersonPlanSwitchbackModal",description:"Enable multi person plan switchback modal",default:!1}),(0,Wa.JP)({name:"enableNewSearchChips",description:"Enable the new Search with chips experience",default:!1}),(0,Wa.JP)({name:"enableHomeViaGraphQL",description:"Enable fetching Home via GraphQL",default:!1}),(0,Wa.JP)({name:"enableNewLyricsPage",description:"Enable the new fullscreen lyrics page",default:!1}),(0,Wa.JP)({name:"enableInspireCreation",description:"Enable the new Inspire Creation features",default:!1}),(0,Wa.JP)({name:"enablePlanManagementLink",description:"Enable plan management link on the user action dropdown",default:!1});let Qa;!function(e){e.TITLE="title",e.DESCRIPTION="description",e.NONE="NONE"}(Qa||(Qa={}));Qa.NONE;let Za,ei,ti,ni,ai,ii,ri,oi,si;!function(e){e.INDEX="INDEX",e.TITLE="TITLE",e.ARTIST="ARTIST",e.PLAYS="PLAYS",e.ADDED_BY="ADDED_BY",e.ADDED_AT="ADDED_AT",e.RELEASE_DATE="RELEASE_DATE",e.ACTIONS="ACTIONS",e.DURATION="DURATION",e.ALBUM="ALBUM",e.ALBUM_OR_PODCAST="ALBUM_OR_PODCAST",e.ALBUM_OR_SHOW="ALBUM_OR_SHOW",e.EVENT_DATE="EVENT_DATE",e.ADD="ADD"}(Za||(Za={})),function(e){e[e.NONE=0]="NONE",e[e.ASC=1]="ASC",e[e.DESC=2]="DESC",e[e.SECONDARY_ASC=3]="SECONDARY_ASC",e[e.SECONDARY_DESC=4]="SECONDARY_DESC"}(ei||(ei={})),function(e){e.TEXT="TEXT"}(ti||(ti={})),function(e){e.CONTAINS="CONTAINS"}(ni||(ni={})),function(e){e.DOWN="DOWN",e.UP="UP",e.EQUAL="EQUAL",e.NEW="NEW"}(ai||(ai={})),function(e){e.TITLE="TITLE",e.ADDED_BY="ADDED_BY",e.ADDED_AT="ADDED_AT",e.ARTIST="ARTIST",e.ALBUM="ALBUM",e.DURATION="DURATION"}(ii||(ii={})),function(e){e.ASC="ASC",e.DESC="DESC"}(ri||(ri={})),function(e){e.TITLE="TITLE",e.ADDED_BY="ADDED_BY",e.ADDED_AT="ADDED_AT",e.ARTIST="ARTIST",e.ALBUM="ALBUM",e.SHOW="SHOW",e.DURATION="DURATION"}(oi||(oi={})),function(e){e.DESC="DESC",e.ASC="ASC"}(si||(si={}));oi.TITLE,oi.ADDED_BY,oi.ADDED_AT,oi.ARTIST,oi.ALBUM,oi.SHOW,oi.DURATION,Za.TITLE,ii.TITLE,Za.ADDED_BY,ii.ADDED_BY,Za.ADDED_AT,ii.ADDED_AT,Za.DURATION,ii.DURATION,Za.ALBUM,ii.ALBUM,Za.ALBUM_OR_PODCAST,ii.ALBUM,Za.ALBUM_OR_SHOW,Za.ARTIST,Za.ACTIONS,Za.RELEASE_DATE,Za.INDEX,Za.PLAYS,Za.ADD,Za.EVENT_DATE,Za.TITLE,oi.TITLE,Za.ADDED_BY,oi.ADDED_BY,Za.ADDED_AT,oi.ADDED_AT,Za.DURATION,oi.DURATION,Za.ALBUM,oi.ALBUM,Za.ALBUM_OR_PODCAST,oi.ALBUM,Za.ALBUM_OR_SHOW,Za.ARTIST,Za.ACTIONS,Za.RELEASE_DATE,Za.INDEX,Za.PLAYS,Za.ADD,Za.EVENT_DATE,ei.NONE,ei.DESC,si.DESC,ei.ASC,si.ASC,ei.SECONDARY_DESC,si.DESC,ei.SECONDARY_ASC,si.ASC,Za.INDEX,Za.TITLE,Za.ALBUM,Za.ADDED_AT,Za.DURATION,Za.INDEX,Za.TITLE,Za.ALBUM,Za.ADDED_BY,Za.ADDED_AT,Za.DURATION,Za.INDEX,Za.TITLE,Za.ALBUM_OR_PODCAST,Za.RELEASE_DATE,Za.ADDED_AT,Za.DURATION,Za.INDEX,Za.TITLE,Za.ALBUM_OR_PODCAST,Za.ADDED_BY,Za.RELEASE_DATE,Za.ADDED_AT,Za.DURATION,Za.INDEX,Za.TITLE,Za.ALBUM,Za.EVENT_DATE,Za.DURATION,Za.INDEX,Za.TITLE,Za.ALBUM,Za.ADDED_BY,Za.DURATION,ei.NONE,ei.DESC,ri.DESC,ei.ASC,ri.ASC,ei.SECONDARY_DESC,ri.DESC,ei.SECONDARY_ASC,ri.ASC;const li={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"genericEpisodeFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"htmlDescription"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"language"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"}}]}},{kind:"Field",name:{kind:"Name",value:"audio"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"format"}},{kind:"Field",name:{kind:"Name",value:"fileId"}},{kind:"Field",name:{kind:"Name",value:"externallyHosted"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"playedState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playPosition"}},{kind:"Field",name:{kind:"Name",value:"state"}}]}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}},{kind:"Field",name:{kind:"Name",value:"precision"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"audioPreview"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"format"}}]}},{kind:"Field",name:{kind:"Name",value:"mediaType"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"podcast"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"following"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"publisher"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"mediaType"}},{kind:"Field",name:{kind:"Name",value:"trailer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"audioPreview"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}},{kind:"Field",name:{kind:"Name",value:"audio"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"externallyHosted"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"}},{kind:"Field",name:{kind:"Name",value:"shareId"}}]}}]}}]};let di,ci,ui,pi,mi;!function(e){e.ONLINE="online",e.OFFLINE="offline",e.FORCED_OFFLINE="forced_offline",e.RECONNECTING="reconnecting"}(di||(di={})),function(e){e.NO="no",e.YES="yes",e.DOWNLOADING="downloading",e.WAITING="waiting"}(ci||(ci={})),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.DISKFULL=8]="DISKFULL",e[e.DOWNLOAD_EXPIRED=14]="DOWNLOAD_EXPIRED",e[e.TOO_MANY_TRACK=19]="TOO_MANY_TRACK",e[e.LICENSE_SERVER_ERROR=21]="LICENSE_SERVER_ERROR",e[e.LICENSE_LOST=22]="LICENSE_LOST",e[e.NOT_ALLOWED=23]="NOT_ALLOWED",e[e.SYNC_CONNECTION_DISABLED=36]="SYNC_CONNECTION_DISABLED",e[e.LISTS_NOT_SAVED=37]="LISTS_NOT_SAVED",e[e.LISTS_NOT_LOADED=38]="LISTS_NOT_LOADED",e[e.FILE_NOT_FOUND=7001]="FILE_NOT_FOUND",e[e.DOWNLOAD_FILE_FAILED=7002]="DOWNLOAD_FILE_FAILED",e[e.DOWNLOAD_IMAGE_FAILED=7003]="DOWNLOAD_IMAGE_FAILED",e[e.REQUEST_KEY_FAILED=7004]="REQUEST_KEY_FAILED",e[e.SAVE_KEY_STORE_FAILED=7005]="SAVE_KEY_STORE_FAILED",e[e.LOAD_KEY_STORE_FAILED=7006]="LOAD_KEY_STORE_FAILED",e[e.KEY_STORE_NOT_FOUND=7007]="KEY_STORE_NOT_FOUND",e[e.KEY_STORE_BAD_SIZE=7008]="KEY_STORE_BAD_SIZE",e[e.KEY_STORE_BAD_SALT=7010]="KEY_STORE_BAD_SALT",e[e.KEY_STORE_BAD_HMAC=7011]="KEY_STORE_BAD_HMAC",e[e.KEY_STORE_BAD_VERSION=7012]="KEY_STORE_BAD_VERSION",e[e.KEY_STORE_OUT_OF_SYNC=7013]="KEY_STORE_OUT_OF_SYNC",e[e.TOO_MANY_EPISODES=7014]="TOO_MANY_EPISODES",e[e.EPISODE_EXPIRED=7015]="EPISODE_EXPIRED",e[e.SAVE_EPISODE_KEY_STORE_FAILED=7016]="SAVE_EPISODE_KEY_STORE_FAILED",e[e.READ_KEY_STORE_FAILED=7017]="READ_KEY_STORE_FAILED",e[e.DOWNLOAD_HEAD_FILE_FAILED=7018]="DOWNLOAD_HEAD_FILE_FAILED",e[e.DEVICE_LIMIT_REACHED=7028]="DEVICE_LIMIT_REACHED"}(ui||(ui={})),function(e){e[e.DOWNLOAD_CAPABILITY=1]="DOWNLOAD_CAPABILITY",e[e.NO_DOWNLOAD_CAPABILITY=2]="NO_DOWNLOAD_CAPABILITY"}(pi||(pi={})),function(e){e[e.DOWNLOADING_ALLOWED=1]="DOWNLOADING_ALLOWED",e[e.DOWNLOADING_NOT_ALLOWED=2]="DOWNLOADING_NOT_ALLOWED"}(mi||(mi={}));var gi=n(8172);(0,n(4671).Z)(((e,t)=>({entities:{},connection:di.ONLINE,permissions:mi.DOWNLOADING_NOT_ALLOWED,setConnection:n=>{e((0,gi.Uy)(t(),(e=>{e.connection=n})))},setPermissions:n=>{e((0,gi.Uy)(t(),(e=>{e.permissions=n})))}})));const hi=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"}),Ei=/\p{White_Space}/u,fi=/\p{P}/u,Si=/\p{sc=Han}/u;function _i(e){return null!==e&&Ei.test(e)}function bi(e){return null!==e&&(e<="/"||e>=":"&&e<="@"||"\\"===e||_i(e))}function yi(e){return null!==e&&fi.test(e)}function ki(e){return null!==e&&Si.test(e)}class Oi{constructor(e,t,n){if(g()(this,"data",void 0),g()(this,"offset",void 0),g()(this,"length",void 0),g()(this,"position",void 0),t<0||n<0||t+n>e.length)throw new RangeError;this.data=e,this.offset=t,this.length=n,this.position=0}static from(e){const t=Array.from(e.normalize("NFC"));return new Oi(t,0,t.length)}toString(){return this.data.slice(this.offset,this.offset+this.length).join("")}slice(e=0,t=this.length){if(e<0||t>this.length)throw new RangeError;const n=this.offset+e,a=t-e;return new Oi(this.data,n,a)}nextCodePoint(){return this.position===this.length?null:this.data[this.offset+this.position++]}}function Ti(e){let t;do{t=e.nextCodePoint()}while(null!==t&&_i(t)||yi(t));return t}function Ai(e,t){let n=Ti(e),a=Ti(t);if(null===a)return{offset:0,length:0};const i=e.offset+e.position-1;let r=e.offset+e.position;for(;;){if(null===n&&null===a)return{offset:i,length:r-i};if(null===a)return{offset:i,length:r-i};if(null===n)return null;if(0!==hi.compare(n,a))return null;r=e.offset+e.position,n=Ti(e),a=Ti(t)}}function Ni(e,t){let n,a,i;do{a=e.position,n=e.nextCodePoint()}while(null!==n&&_i(n));if(null!=t&&t.segmentQuotedStrings&&function(e){return null!==e&&('"'===e||"'"===e)}(n)){const t=n;a=e.position;do{i=e.position,n=e.nextCodePoint()}while(null!==n&&n!==t);return null===n&&a===i?null:e.slice(a,i)}do{if(i=e.position,null!=t&&t.segmentCJKUnifieIdeographs&&ki(n))break;n=e.nextCodePoint()}while(null!==n&&!bi(n));return null===n&&a===i?null:e.slice(a,i)}function Di(e){return Ni(e,{segmentQuotedStrings:!0,segmentCJKUnifieIdeographs:!1})}function vi(e){return Ni(e,{segmentQuotedStrings:!1,segmentCJKUnifieIdeographs:!0})}function Ii(e,t){const n=[];for(let a=vi(e);null!==a;a=vi(e)){let i=Ai(a,t.slice());null===i?(i=Ai(e.slice(a.offset),t.slice()),null===i||n.push(i)):n.push(i)}return n}function Pi(e,t){return e.offset===t.offset&&e.length===t.length}function Ci(e,...t){const n=Oi.from(e),a=[];for(let e=Di(n);null!==e;e=Di(n)){const n=[];for(let a=0;a<t.length;++a){const i=t[a],r=Ii(Oi.from(i),e);for(const e of r)n.push({text:i,range:e})}if(0===n.length)return null;a.push(...n.filter(((e,t,n)=>e.range.length>0&&n.findIndex((t=>Pi(e.range,t.range)))===t)))}return a.length>0?a:null}const wi="SbHs3Uu1EU0cmvhxoTNE",Li="XagfkHHUPIC2O6Q_lfEw",Fi=(e,t)=>"string"==typeof e&&"string"==typeof t?!(e.length>0)||null!==Ci(e,t):"boolean"!=typeof e||e,Ri=({filter:e,title:t})=>{const n=(0,s.useCallback)((({searchWords:[e],textToHighlight:t})=>e?(Ci(e,t)||[]).map((e=>({start:e.range.offset,end:e.range.offset+e.range.length}))):[]),[]);return s.createElement(qn.Dy,{as:"h2",variant:"cello",className:Li,semanticColor:"textBase"},"string"==typeof e&&e.length>0?s.createElement(zn(),{searchWords:[e],textToHighlight:t,findChunks:n,highlightClassName:wi}):t)},Mi=({filter:e,title:t,children:n,rows:a})=>{const i=Fi(e,t);if("ALLOW_NULL_ROWS"===a)return i?s.createElement(s.Fragment,null,s.createElement(Ri,{filter:e,title:t}),n):null;const r=i?a:a.filter((e=>e&&Fi(null==e?void 0:e.props.filter,null==e?void 0:e.props.title)));return r.length>0?s.createElement(s.Fragment,null,s.createElement(Ri,{filter:e,title:t}),r,n):null};var Ui=n(6501);const xi={horizontalPair:"QdHLUcR6fUG0NMpMpxbQ",ProxySettings:"PM2eBojuLDjs3wM2jY6x",fullWidth:"V0tNwwnJHzwFrLYFSVhn",proxyInput:"aQJknW_LvVUnrcdJNXVA",labelStretch:"iXaZ29sMMazjjRS1_MGy",restartAppButton:"yItjEPzHEmxYuEoTJJBl",title:"HkLDZG7BHRMlXcxLOlBd",ProxyFormGroup:"ZUltXmAUnMFuWM6kgOQo"},Bi=({id:e,type:t,placeHolder:n,inputRef:a,handleOnChange:i})=>s.createElement("input",{type:t||"text",id:e,"data-testid":e,className:xi.proxyInput,placeholder:n,ref:a,onChange:i}),Gi=({children:e,label:t})=>s.createElement(Ui.cw,{label:t,className:xi.ProxyFormGroup},e),ji=(e,t,n)=>{let a=`${e}:${t}`;switch(n){case bt:a+="@http";break;case yt:a+="@socks4";break;case kt:a+="@socks5"}return a},Wi=({addr:e,mode:t,pass:n,user:a,setValue:i,restartContainer:r,fullWidth:o,filter:l})=>{const d=(0,s.useRef)(null),c=(0,s.useRef)(null),u=(0,s.useRef)(null),p=(0,s.useRef)(null),[m,g]=(0,s.useState)(""),[h,E]=(0,s.useState)(""),[f,S]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const[t,n]=(null==e?void 0:e.split(/[:@]+/))||["",""];g(t),E(n),d.current&&(d.current.value=t),c.current&&(c.current.value=n)}),[e]),(0,s.useEffect)((()=>{p.current&&n&&(p.current.value=n.toString())}),[n]),(0,s.useEffect)((()=>{u.current&&a&&(u.current.value=a.toString())}),[a]);const _=(0,s.useCallback)((({target:e})=>{const n=ji(e.value,h,t||0);g(e.value),i("network.proxy.addr",n),S(!0)}),[t,h,i]),b=(0,s.useCallback)((({target:e})=>{const n=ji(m,e.value,t||0);E(e.value),i("network.proxy.addr",n),S(!0)}),[t,m,i]),y=(0,s.useCallback)((({target:e})=>{i("network.proxy.user",e.value),S(!0)}),[i]),k=(0,s.useCallback)((({target:e})=>{i("network.proxy.pass",e.value),S(!0)}),[i]),O=0!==t&&1!==t,T=t!==yt;return s.createElement(Mi,{rows:"ALLOW_NULL_ROWS",filter:l,title:_t.get("desktop.settings.proxy.title")},s.createElement("div",{className:zt()(xi.ProxySettings,o?xi.fullWidth:null)},s.createElement(Gi,{label:_t.get("desktop.settings.proxy.type")},s.createElement($n,{className:xi.secondColumn,id:"network.proxy.mode",value:t,onSelect:e=>{const t=parseInt(e,10);i("network.proxy.mode",t),S(!0)}},Tt.map((({enumKey:e,enumValue:t})=>s.createElement("option",{key:e,value:t,"data-testid":e},Ot[e]?Ot[e].label():""))))),O?s.createElement(s.Fragment,null,s.createElement("div",{className:xi.horizontalPair},s.createElement(Gi,{label:_t.get("desktop.settings.proxy.host")},s.createElement(Bi,{id:"network.proxy.host",handleOnChange:_,placeHolder:_t.get("desktop.settings.proxy.host"),inputRef:d})),s.createElement(Gi,{label:_t.get("desktop.settings.proxy.port")},s.createElement(Bi,{id:"network.proxy.port",type:"number",handleOnChange:b,placeHolder:_t.get("desktop.settings.proxy.port"),inputRef:c}))),s.createElement("div",{className:T?xi.horizontalPair:void 0},s.createElement(Gi,{label:_t.get("desktop.settings.proxy.user")},s.createElement(Bi,{id:"network.proxy.user",handleOnChange:y,placeHolder:_t.get("desktop.settings.proxy.user"),inputRef:u})),T?s.createElement(Gi,{label:_t.get("desktop.settings.proxy.pass")},s.createElement(Bi,{id:"network.proxy.pass",handleOnChange:k,placeHolder:_t.get("desktop.settings.proxy.pass"),type:"password",inputRef:p})):null)):null,f&&s.createElement("div",null,s.createElement(Jn.P,{buttonSize:"sm",className:xi.restartAppButton,onClick:r},_t.get("settings.restartApp")))))};function Vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}const Hi=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];const Yi=(0,c.$j)((e=>({settings:{proxy:e.settings.proxy}})),(e=>({fetchProxySettings(){e(Ut.fetchProxySettings())},updateProxySettings(t){e(Ut.updateProxySettings(t))},restartClient(){e(Ut.restartClient())}})))((({settings:e={proxy:{mode:0,address:"",username:"",password:""}},fetchProxySettings:t=(()=>{}),updateProxySettings:n=(()=>{}),restartClient:a=(()=>{})})=>{(0,s.useEffect)((()=>{t()}),[t]);const i=(0,s.useCallback)(((t,a)=>{if(function(e){return!!Hi.includes(e)}(t)){const i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.proxy);switch(t){case"network.proxy.mode":i.mode=a;break;case"network.proxy.addr":i.address=a;break;case"network.proxy.user":i.username=a;break;case"network.proxy.pass":i.password=a}n(i)}return Promise.resolve()}),[e,n]);return s.createElement("main",{className:"Settings","aria-labelledby":"settings-form-title","data-testid":"settings"},s.createElement("h1",{className:"HeroText",id:"settings-form-title"},_t.get("desktop.login.PreferencesLink")),s.createElement(Wi,{mode:e.proxy.mode,addr:e.proxy.address,user:e.proxy.username,pass:e.proxy.password,setValue:i,restartContainer:a,fullWidth:!0}))}));class Ji extends s.PureComponent{constructor(e){super(e),this.handleSettingsClick=this.goToSettingsPage.bind(this),this.handleBackToLoginClick=this.handleBackToLoginClick.bind(this)}handleSignupClick(){const{openSignupPage:e,onInteraction:t}=this.props,n=jt();e(n),t("login/welcome","click","open-page-signup",null,n)}handleBackToLoginClick(e){e.preventDefault(),this.props.openLoginPage(),this.props.onInteraction(this.props.mode,"click","back-to-login")}goToSettingsPage(e){e.preventDefault(),this.props.openSettingsPage(),this.props.onInteraction(this.props.mode,"click","open-page-settings")}renderPreferencesLink(){return s.createElement("a",{className:"Footer__link",href:"#",onClick:this.handleSettingsClick,"data-ta-id":"login-footer-settings"},_t.get("desktop.login.PreferencesLink"))}renderBackToLoginLink(){return s.createElement("a",{className:"Footer__link",href:"#",onClick:this.handleBackToLoginClick,"data-ta-id":"login-footer-settings-back-to-login"},_t.get("desktop.login.Back"))}renderTryAgain(){return s.createElement(s.Fragment,null,s.createElement("span",null,_t.get("desktop-auth.login.not-seeing-browser"))," ",s.createElement("a",{href:"#",onClick:()=>this.props.tryAgainHandler()},_t.get("desktop-auth.login.try-again")))}renderSignupLink(){return s.createElement("a",{className:"Footer__NoUnderline",href:"#",id:"signup-link",onClick:()=>this.handleSignupClick(),"data-ta-id":"welcome-signup-link",dangerouslySetInnerHTML:{__html:_t.get("desktop.login.DontHaveAnAccountSignup")}})}renderRussiaLegalFormLink(){return s.createElement("div",null,s.createElement("a",{className:"Footer__link",href:"https://support.spotify.com/ru-ru/contact-spotify-legal-form/",target:"_blank",rel:"noopener"},"Форма для Ваших обращений"))}render(){const{mode:e,country:t}=this.props;return s.createElement("footer",{className:"Footer",role:"contentinfo"},"login"===e&&this.renderPreferencesLink(),"settings"===e&&this.renderBackToLoginLink(),"open-browser"===e&&this.renderTryAgain(),"welcome"===e&&this.renderSignupLink(),"RU"===t&&this.renderRussiaLegalFormLink())}}const Ki=(0,c.$j)((e=>{var t;return{country:null===(t=e.signup.restrictions)||void 0===t?void 0:t.country}}),(e=>({tryAgainHandler:()=>{e(Ut.abortLoginWithAccounts()),e(Ut.enterWelcomeMode())},openLoginPage:()=>{e(Ut.enterLoginMode())},openSignupPage:t=>e(Ut.enterSignupMode(t)),openSettingsPage:()=>e(Ut.enterSettingsMode()),onInteraction:(t,n,a,i,r)=>e(Ut.interaction(t,n,a,i,r))})))(Ji);class $i extends s.PureComponent{render(){return s.createElement("header",{className:"Header"},s.createElement("h1",{className:"glue-hidden-visually"},"Spotify"),s.createElement("img",{className:"Header__logo",src:"images/logo.svg",alt:""}))}}var Xi=n(1226),zi=n(5989);class qi extends s.Component{renderFakeWebPlayer(){return s.createElement("div",{className:"fakeWebPlayer"},s.createElement("aside",null),s.createElement("footer",null,s.createElement("div",{className:"fakeWebPlayer__footer-left"}),s.createElement("div",{className:"fakeWebPlayer__footer-center"}),s.createElement("div",{className:"fakeWebPlayer__footer-right"})),s.createElement("main",null,s.createElement("div",{className:"fakeWebPlayer__content"})))}render(){const{loading:e,mode:t,loggedIn:n,previousMode:a,throbberDelay:i,signupStep:r,previousSignupStep:o}=this.props;if(e||!t)return s.createElement(xt,{delay:i});if(n)return null;let l=a?`__${t} __${a}-to-${t}`:"";return"signup"===t&&Number.isInteger(o)&&(l+=` __signup_step_${o}_to_${r}`),s.createElement("main",{className:"App",key:"main1","data-ta-id":"login-app","data-testid":"login-app","data-ta-login-mode":t},this.renderFakeWebPlayer(),s.createElement("div",{className:`App__content ${l}`},s.createElement(zi.Z,{mode:"in-out"},s.createElement(Xi.Z,{timeout:{appear:0,enter:0,exit:650},key:l},s.createElement("div",{className:`App__modal ${l}`},s.createElement($i,null),"welcome"===t&&s.createElement(Yt,null),"signup"===t&&s.createElement(Rn,{step:r}),"login"===t&&s.createElement(Vn,null),"open-browser"===t&&s.createElement(Yn,null),"settings"===t&&s.createElement(Yi,null),s.createElement(Ki,{mode:t}))))))}}g()(qi,"defaultProps",{throbberDelay:0,transitionLeaveTimeout:0});const Qi=(0,c.$j)((e=>({mode:e.app.mode,previousMode:e.app.previousMode,signupStep:e.signup.step,previousSignupStep:e.signup.previousStep,loading:!!e.login.loading,loggedIn:!!e.login.loggedIn,throbberDelay:e.login.throbberDelay,transitionLeaveTimeout:e.login.redirectDelay})))(qi);var Zi=n(3828),er=n(3894);const tr=e=>t=>n=>{const a=t(n);switch(n.type){case Ut.START_APP:e.dispatch(Ut.fetchUTMParameters()),e.dispatch(Ut.getSignupRestrictions());!j.getItem("lastUsername")?e.dispatch(Ut.enterWelcomeMode()):e.dispatch(Ut.enterLoginMode());break;case Ut.LOGIN_FAIL:{const t=e.getState();if(n.loginType===Ut.LOGIN_TYPE_AUTOLOGIN){const n=t.app.mode;"welcome"===n?e.dispatch(Ut.enterWelcomeMode()):"login"===n?e.dispatch(Ut.enterLoginMode()):"signup"===n&&e.dispatch(Ut.enterSignupMode())}else{if("open-browser"===t.app.mode){const a=n.errorData;let i=qt(a.errorCategory,a.errorCode,a.errorReference);"desktop_login_accounts"===a.errorCategory&&4===a.errorCode&&(i="signup"===t.experimentWebAuthReducer.operationUsed?_t.get("desktop-auth.login.signup-time-out"):_t.get("desktop-auth.login.login-time-out")),i?e.dispatch(Ut.enterWelcomeMode(i)):e.dispatch(Ut.enterWelcomeMode())}}break}case Ut.ENTER_SIGNUP_MODE:{const t=e.getState().signup.restrictions;t?!1===t.is_country_launched&&e.dispatch(Ut.countryNotLaunched()):e.dispatch(Ut.getSignupRestrictions());break}case Ut.SIGNUP_RESTRICTIONS_SUCCESS:!1===n.restrictions.is_country_launched&&e.dispatch(Ut.countryNotLaunched());break;case Ut.SIGNUP_FAILURE:(n.errors.email||n.errors.password||n.errors.displayname)&&e.dispatch(Ut.enterSignupModeStep0());break;case Ut.COUNTRY_NOT_LAUNCHED:e.dispatch(Ut.openSignupPage(!0))}return a};var nr=n(9798);const ar=Gt().create().toString(),ir="has-used-app",rr=!window.localStorage.getItem(ir);rr&&window.localStorage.setItem(ir,!0);const or=()=>{const e=j.getItem("utmParameters");let t;try{t=e?JSON.parse(e).referral:""}catch(e){t=""}return t};class sr{constructor(e){this._eventSender=e}logPageView({page:e}){this.logAction({page:e,action_type:"pageview",action_intent:""})}logAction({page:e,action_type:t,action_intent:n,item_id:a,action_hash:i}){this._eventSender.send((0,nr.e)({action_type:t,action_intent:n,action_page:e,action_item_id:a,action_hash:i,device_is_new_install:rr,device_locale:window.__spotify.locale,device_referrer:or(),ab_flags:"",session_id:ar}))}}function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}const dr=e=>{const t=new sr(e);return()=>e=>n=>{const a=e(n);switch(n.type){case Ut.ENTER_LOGIN_MODE:t.logPageView({page:"login"});break;case Ut.LOGIN_SUCCESS:n.loginType===Ut.LOGIN_TYPE_EMAIL?t.logAction({page:"login",action_type:"view",action_intent:"show-success-login-email"}):n.loginType===Ut.LOGIN_TYPE_FACEBOOK&&t.logAction({page:"login",action_type:"view",action_intent:"show-success-login-facebook"});break;case Ut.LOGIN_FAIL:n.loginType===Ut.LOGIN_TYPE_EMAIL?n.errorData&&3===n.errorData.errorCode&&t.logAction({page:"login",action_type:"view",action_intent:"show-error-invalid-credential"}):n.loginType===Ut.LOGIN_TYPE_FACEBOOK&&t.logAction({page:"login",action_type:"view",action_intent:"show-error-login-facebook"});break;case Ut.ENTER_SIGNUP_MODE:t.logPageView({page:"signup"});break;case Ut.ENTER_SIGNUP_MODE_STEP_0:t.logAction({page:"signup",action_type:"view",action_intent:"show-signup-step-one"});break;case Ut.ENTER_SIGNUP_MODE_STEP_1:t.logAction({page:"signup",action_type:"view",action_intent:"show-signup-step-two"});break;case Ut.SIGNUP_SUCCESS:t.logAction({page:"signup",action_type:"view",action_intent:"show-success-signup-email"});break;case Ut.SIGNUP_FAILURE:t.logAction({page:"signup",action_type:"view",action_intent:"show-error-signup-email",item_id:n.errors&&Object.keys(n.errors).join("|")});break;case Ut.FACEBOOK_SIGNUP_SUCCESS:t.logAction({page:"signup",action_type:"view",action_intent:"show-success-authentication-facebook"});break;case Ut.FACEBOOK_SIGNUP_FAILURE:t.logAction({page:"signup",action_type:"view",action_intent:"show-error-authentication-facebook",item_id:n.errorData&&`${n.errorData.errorCode} - ${n.errorData.errorDescription}`});break;case Ut.ENTER_WELCOME_MODE:t.logPageView({page:"login/welcome"});break;case Ut.ENTER_SETTINGS_MODE:t.logPageView({page:"login/settings"});break;case Ut.INTERACTION:t.logAction({page:n.page,action_type:n.interactionType,action_intent:n.intent,item_id:n.itemId,action_hash:n.actionHash});break;case Ut.VALIDATE_FIELD_FAILURE:if(n.error){const e=n.field,a=n.error.code;let i=null,r=null;"valueMissing"===a?i=`show-error-empty-${e}`:["incomplete","invalid","typeMismatch","tooShort"].includes(a)?i=`show-error-format-${e}`:(i=`show-error-${e}`,r=n.error.message||""),null!==i&&t.logAction(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({page:"signup",action_type:"view",action_intent:i},r?{item_id:r}:{}))}}return a}},cr=e=>{window.location.href=e},ur=()=>e=>t=>{const n=e(t);if(!t.redirectTo)return n;let a;return"xpui"!==t.redirectTo||(a="spotify:app:xpui",t.redirectDelay?setTimeout((()=>{cr(a)}),t.redirectDelay):cr(a)),n};function pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const gr={errorMessage:null};const hr=function(e=gr,t){var n;switch(t.type){case Ut.ENTER_SIGNUP_MODE:return mr(mr({},e),{},{previousMode:e.mode,mode:"signup"});case Ut.ENTER_LOGIN_MODE:case Ut.COUNTRY_NOT_LAUNCHED:return mr(mr({},e),{},{previousMode:e.mode,mode:"login"});case Ut.ENTER_WELCOME_MODE:return mr(mr({},e),{},{previousMode:e.mode,mode:"welcome",errorMessage:null!==(n=t.errorMessage)&&void 0!==n?n:null});case Ut.ENTER_SETTINGS_MODE:return mr(mr({},e),{},{previousMode:e.mode,mode:"settings"});default:return e}};function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Sr={proxy:{mode:0,address:"",username:"",password:""}};const _r=function(e=Sr,t){return function(e){return e.type===Ut.SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS}(t)?fr(fr({},e),{},{proxy:{mode:t.data.mode,address:t.data.address,username:t.data.username,password:t.data.password}}):e};function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const kr={step:0,isAttempting:!1,isSuccessful:void 0,errors:{},errorData:{},validated:{},formData:{name:"",email:"",password:"",birthDate:{day:void 0,month:void 0,year:void 0},gender:void 0,sendEmail:void 0,shareData:void 0,agreeEula:!1},restrictions:void 0};const Or=function(e=kr,t){switch(t.type){case Ut.ENTER_SIGNUP_MODE_STEP_0:return yr(yr({},e),{},{previousStep:e.step,step:0});case Ut.ENTER_SIGNUP_MODE_STEP_1:return yr(yr({},e),{},{previousStep:e.step,step:1});case Ut.SIGNUP_RESTRICTIONS_SUCCESS:return yr(yr({},e),{},{formData:yr(yr({},e.formData),{},{sendEmail:!!t.restrictions.requires_marketing_opt_in_text||void 0,agreeEula:!!t.restrictions.pretick_eula}),restrictions:t.restrictions});case Ut.SIGNUP_RESTRICTIONS_FAILURE:return yr(yr({},e),{},{errorData:t.error});case Ut.SIGNUP_ATTEMPT:return yr(yr({},e),{},{isAttempting:!0,errorData:null});case Ut.SIGNUP_SUCCESS:return yr(yr({},e),{},{isAttempting:!0,isSuccessful:!0,errorData:null});case Ut.SIGNUP_FAILURE:return yr(yr({},e),{},{isAttempting:!1,isSuccessful:!1,errors:t.errors,errorData:null});case Ut.FACEBOOK_SIGNUP_ATTEMPT:return yr(yr({},e),{},{errorData:null,errors:{}});case Ut.FACEBOOK_SIGNUP_FAILURE:return yr(yr({},e),{},{errorData:t.errorData});case Ut.VALIDATE_FIELD_ATTEMPT:return yr(yr({},e),{},{errors:yr(yr({},e.errors),{},{[t.field]:void 0})});case Ut.VALIDATE_FIELD_FAILURE:return yr(yr({},e),{},{errors:yr(yr({},e.errors),{},{[t.field]:t.error}),validated:yr(yr({},e.validated),{},{[t.field]:!1})});case Ut.VALIDATE_FIELD_SUCCESS:return yr(yr({},e),{},{errors:yr(yr({},e.errors),{},{[t.field]:void 0}),validated:yr(yr({},e.validated),{},{[t.field]:!0})});case Ut.UPDATE_SIGNUP_DATA:{const n={};for(const e of Object.keys(t.data))n[e]=void 0;return yr(yr({},e),{},{errors:yr(yr({},e.errors),n),formData:yr(yr({},e.formData),t.data)})}case Ut.CLEAR_ALL_ERRORS:return yr(yr({},e),{},{errors:{}});default:return e}};function Tr(e){const t=(0,Zi.MT)((0,Zi.UY)({app:hr,login:z,settings:_r,signup:Or}),void 0,(0,Zi.md)(er.Z,tr,dr(e),ur));return t.subscribe((()=>{const e=t.getState();e.login.username&&localStorage.setItem(H,e.login.username),e.login.utmParameters&&localStorage.setItem(J,JSON.stringify(e.login.utmParameters))})),t}var Ar=n(2585),Nr=n(3969);let Dr=null;var vr=n(8510),Ir=n(6471);(async function(){for(const e of[window.__spotify.locale,pt.en])try{const t=await fetch(`i18n/${e}.json`).then((e=>e.json()));return _t.setLocale(e),void _t.setDictionary(t)}catch(e){0}throw new Error("Cannot find a suitable locale! Something is wrong: talk to #desktop.")})().then((async function(){const e=function(){const e=(0,Nr.createBaseTransport)({providers:{endpoints:(0,Nr.createXResolveProvider)(),token:()=>null}});return e.connect(),e}();Dr=e;const t=((e,t,n)=>{const a=e.event_sender_context_information,i=[(0,Ir.UR)({version:a.client_version_string}),(0,Ir.jx)(n),(0,Ir.IE)(a.installation_id),(0,Ir.Hv)({name:a.platform_type,version:a.os_version}),(0,Ir.yD)({manufacturer:a.device_manufacturer||"",model:a.device_model||""})];return(0,vr.mi)({transport:t,suppressPersist:!1,context:i})})(window.__spotify,e,"65b708073fc0480ea92a077233ca87bd"),n=Tr(t);p.attach(),p.update(),u.attach();const a=document.location.search,i=new RegExp(`\\?param=error-code\\${encodeURIComponent("=")}([0-9]+)`,"i");window.addEventListener("message",(e=>{"critical-update-error"===e.data&&n.dispatch(Ut.loginFailed({errorCode:e.data}))}));const r=a.match(i);if(a&&r){const e=+r[1];n.dispatch(Ut.loginFailed({errorCode:e}))}let o="linux";window.navigator.platform.startsWith("Mac")&&(o="mac"),window.navigator.platform.startsWith("Win")&&(o="windows"),document.body.classList.add(`body-container--${o}`),l.render(s.createElement(d.zj,null,s.createElement(c.zt,{store:n},s.createElement(Qi,null))),document.getElementById("main")),n.dispatch(Ut.startApp()),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr");const m={[Ar.PLATFORM_UNKNOWN]:"body-container--unknown-os",[Ar.PLATFORM_MAC]:"body-container--mac",[Ar.PLATFORM_WINDOWS]:"body-container--windows"},g=(0,Ar.getPlatform)();document.body.classList.add(m[g])}))},2585:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PLATFORM_MAC:()=>i,PLATFORM_UNKNOWN:()=>a,PLATFORM_WINDOWS:()=>r,getPlatform:()=>l,isMac:()=>o,isWindows:()=>s});const a=Symbol("PLATFORM_UNKNOWN"),i=Symbol("PLATFORM_MAC"),r=Symbol("PLATFORM_WINDOWS");function o(){return window.navigator.platform.startsWith("Mac")}function s(){return window.navigator.platform.startsWith("Win")}function l(){return o()?i:s()?r:a}},2976:(e,t)=>{let n=!1;t.update=()=>{},t.attach=()=>{if(n)return;n=!0;const e=window.__spotify&&window.__spotify.locale;e&&document.documentElement.setAttribute("lang",e)},t.detach=()=>{n&&(n=!1,document.documentElement.removeAttribute("lang"))}},685:(e,t,n)=>{const{getPlatform:a,PLATFORM_UNKNOWN:i,PLATFORM_MAC:r,PLATFORM_WINDOWS:o}=n(2585);let s=!1,l="always-visible",d=0;const c={[i]:"linux",[r]:"mac",[o]:"windows"};let u=c[i];function p(){const e=[...document.querySelectorAll("*")],t=[],n=["scroll","auto","overlay"];e.forEach((e=>{const a=window.getComputedStyle(e),i=a.overflowX,r=a.overflowY;n.includes(i)&&t.push({node:e,property:"overflow-x"}),n.includes(r)&&t.push({node:e,property:"overflow-y"})}));const a=document.createElement("style");a.innerHTML="\n    html::-webkit-scrollbar,\n    body::-webkit-scrollbar {\n      background-color: rgba(1, 2, 3, 0) !important;\n    }\n  ".trimRight();const i=`data-scrollbar-fix-${++d}-id`;let r=0;t.forEach((({node:e,property:t})=>{if(e!==document.body){const n=++r;e.setAttribute(i,n),a.innerHTML+=`\n    [${i}="${n}"] { ${t}: hidden !important; }`}})),document.head.appendChild(a),setTimeout((()=>{document.head.removeChild(a),t.forEach((({node:e})=>{e.removeAttribute(i)}))}),0)}t.performScrollBarFix=p,t.update=function(){},t.attach=function(){if(s)return;s=!0;const e=window.__spotify&&window.__spotify.scroller_style;l="overlay"===e?"overlay":"always-visible";const t=a();u=c[t],"always-visible"===l||"mac"!==u?(document.body.classList.remove("scrollbar-style-when-scrolling-mac"),document.body.classList.add(`scrollbar-style-visible-${u}`)):(document.body.classList.remove(`scrollbar-style-visible-${u}`),document.body.classList.add("scrollbar-style-when-scrolling-mac")),window.addEventListener("message",(e=>{"set_active"===e.data.name&&e.data.active&&p()}))},t.detach=function(){s&&(s=!1,d=0)}}},n={};function a(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,a),r.exports}a.m=t,a.amdO={},e=[],a.O=(t,n,i,r)=>{if(!n){var o=1/0;for(c=0;c<e.length;c++){for(var[n,i,r]=e[c],s=!0,l=0;l<n.length;l++)(!1&r||o>=r)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(s=!1,r<o&&(o=r));if(s){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,i,r]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={535:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[o,s,l]=n,d=0;if(o.some((t=>0!==e[t]))){for(i in s)a.o(s,i)&&(a.m[i]=s[i]);if(l)var c=l(a)}for(t&&t(n);d<o.length;d++)r=o[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=a.O(void 0,[569],(()=>a(9583)));i=a.O(i)})();
//# sourceMappingURL=login.js.map